(function(t){function e(e){for(var s,n,o=e[0],u=e[1],m=e[2],l=0,c=[];l<o.length;l++)n=o[l],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&c.push(r[n][0]),r[n]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(t[s]=u[s]);d&&d(e);while(c.length)c.shift()();return i.push.apply(i,m||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,o=1;o<a.length;o++){var u=a[o];0!==r[u]&&(s=!1)}s&&(i.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},r={app:0},i=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var m=0;m<o.length;m++)e(o[m]);var d=u;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0270":function(t,e,a){},"034f":function(t,e,a){"use strict";var s=a("85ec"),r=a.n(s);r.a},"35c0":function(t,e,a){},3923:function(t,e,a){},"482b":function(t,e,a){"use strict";var s=a("4b25"),r=a.n(s);r.a},"4b25":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},i=[],n={name:"app",components:{}},o=n,u=(a("034f"),a("2877")),m=Object(u["a"])(o,r,i,!1,null,null,null),d=m.exports,l=a("2819"),c=a.n(l),_=a("8c4f"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"quter"},[a("sumLine",{attrs:{wywData:t.rawData,localData:t.rawLocalData}})],1),a("div",{staticClass:"quter"},[a("orderCompare")],1),a("timeout",{staticClass:"half",attrs:{wywData:t.rawData,edit:t.edit}})],1)},p=[],f=(a("4d63"),a("ac1f"),a("25f0"),a("5319"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ve-line",{attrs:{data:t.SumData,extend:t.sumExtend}})],1)}),v=[];Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t};var b={name:"sumLine",props:["wywData","localData"],watch:{wywData:function(){this.rawData=this.wywData,this.getSum(),this.dataReady&&this.dataLocalReady&&(this.dataLocalReady=!1),this.dataReady=!0,this.dataReady&&this.dataLocalReady&&this.get_union()},localData:function(){this.rawLocalData=this.localData,this.getLocalSum(),this.dataReady&&this.dataLocalReady&&(this.dataReady=!1),this.dataLocalReady=!0,this.dataReady&&this.dataLocalReady&&this.get_union()}},data:function(){return{sumExtend:{title:{show:!0,text:"故障量标题"},toolbox:{show:!0,feature:{myPause:{show:!0,title:"暂停轮播",icon:"path://M341.333333 113.777778a28.444444 28.444444 0 0 1 28.444445 28.444444v739.555556a28.444444 28.444444 0 0 1-56.888889 0V142.222222a28.444444 28.444444 0 0 1 28.444444-28.444444z m341.333334 0a28.444444 28.444444 0 0 1 28.444444 28.444444v739.555556a28.444444 28.444444 0 0 1-56.888889 0V142.222222a28.444444 28.444444 0 0 1 28.444445-28.444444z",onclick:this.play},myPlay:{show:!1,title:"继续轮播",icon:"path://M221.790362 1014.94374c-36.775578 0-68.472488-13.843286-91.662653-40.033785-23.130813-26.121937-35.868929-63.466474-35.868928-105.155968V154.424068c0-41.691541 12.739139-79.041194 35.869952-105.169271 23.193235-26.197662 54.889121-40.044018 91.662652-40.044018 27.752064 0 56.166207 8.159844 84.451414 24.25338l570.119699 358.735338 0.153496 0.088004c50.086745 28.728298 78.901001 72.395844 79.053474 119.806643 0 48.284703-28.559453 91.193978-80.418564 120.835066l-0.163729 0.093121L308.632219 989.273081C278.266631 1006.546489 249.860674 1014.94374 221.790362 1014.94374zM221.790362 63.144132c-44.709271 0-73.598228 35.82902-73.598228 91.279936v715.330942c0 55.43659 28.888957 91.2564 73.598228 91.2564 18.275225 0 38.137599-6.03239 59.034535-17.929348l0.165775-0.095167 566.30993-356.24154c35.544541-20.447704 54.333466-46.232974 54.333466-74.56423-0.105401-37.916565-32.837896-62.23953-52.339042-73.362868l-1.198292-0.713244L278.571576 79.725786l-0.169868-0.096191C259.408121 68.843948 239.833297 63.144132 221.790362 63.144132z",onclick:this.play},myChange:{show:!0,title:"切换维度",icon:"path://M480 32a32 32 0 0 0 32 32c119.664 0 232.16 46.608 316.768 131.232C913.392 279.84 960 392.336 960 512c0 118.096-45.472 229.168-128 313.392V736a32 32 0 0 0-64 0v192h192a32 32 0 0 0 0-64h-76.416C974.16 768.512 1024 644.112 1024 512c0-136.752-53.264-265.328-149.984-362.032C777.328 53.264 648.752 0 512 0a32 32 0 0 0-32 32zM149.984 874.032C246.672 970.736 375.248 1024 512 1024a32 32 0 0 0 0-64c-119.664 0-232.16-46.608-316.768-131.232C110.608 744.16 64 631.664 64 512c0-118.096 45.472-229.168 128-313.392V288a32 32 0 0 0 64 0V96H64a32 32 0 0 0 0 64h76.416C49.84 255.488 0 379.888 0 512c0 136.752 53.264 265.328 149.984 362.032z",onclick:this.change},saveAsImage:{show:!0}}}},sumDataArray:{length:4,flag:0,title:["19故障量","本地故障量","总体故障量","总体责任故障量"],columns:[["日期","故障量","责任故障量"],["日期","故障量","责任故障量"],["日期","19工单","本地工单"],["日期","19工单","本地工单"]],rows:[],loading:!0},SumData:{columns:["日期","故障量","责任故障量"],rows:[]},dataReady:!1,dataLocalReady:!1,rawData:this.data,rawLocalData:this.localData,sum:0,timer:void 0,playing:!0}},created:function(){this.init()},methods:{init:function(){console.log("sum init"),this.timer=setTimeout(this.change,5e3)},getSum:function(){var t=[],e=[],a=new Date;a.setDate(a.getDate()-1),a.setHours(0),a.setMinutes(0),a.setSeconds(0);for(var s=a.getDate(),r=a.getMonth()+1,i=0;i<s+1;i++)t.push(new Date(a.setDate(i+1))),e.push({"日期":r+"月"+(i+1)+"日","故障量":0,"责任故障量":0});for(var n in e.pop(),this.rawData){var o=this.rawData[n];if("广州"==this.rawData[n].responsible_province){for(var u=new Date(o.end_time),m=0;m<s;m++)if(u>t[m]&&u<t[m+1]){e[m]["故障量"]=e[m]["故障量"]+1,"1"==o.is_assess&&(e[m]["责任故障量"]=e[m]["责任故障量"]+1);break}u>t[s]&&(e[s]["故障量"]=e[s]["故障量"]+1,"1"==o.is_assess&&(e[s]["责任故障量"]=e[s]["责任故障量"]+1))}}this.sumDataArray.rows[0]=e},getLocalSum:function(){var t=[],e=[],a=new Date;a.setDate(a.getDate()-1),a.setHours(0),a.setMinutes(0),a.setSeconds(0);for(var s=a.getDate(),r=a.getMonth()+1,i=0;i<s+1;i++)t.push(new Date(a.setDate(i+1))),e.push({"日期":r+"月"+(i+1)+"日","故障量":0,"责任故障量":0});for(var n in e.pop(),this.rawLocalData){for(var o=this.rawLocalData[n],u=new Date(o.end_time),m=0;m<s;m++)if(u>t[m]&&u<t[m+1]){e[m]["故障量"]=e[m]["故障量"]+1,"1"==o.is_trouble&&(e[m]["责任故障量"]=e[m]["责任故障量"]+1);break}u>t[s]&&(e[s]["故障量"]=e[s]["故障量"]+1,"1"==o.is_trouble&&(e[s]["责任故障量"]=e[s]["责任故障量"]+1))}this.sumDataArray.rows[1]=e},get_union:function(){var t=[],e=new Date;e.setDate(e.getDate()-1),e.setHours(0),e.setMinutes(0),e.setSeconds(0);for(var a=e.getDate(),s=e.getMonth()+1,r=[],i=[],n=0;n<a+1;n++)t.push(new Date(e.setDate(n+1))),r.push({"日期":s+"月"+(n+1)+"日","19工单":0,"本地工单":0}),i.push({"日期":s+"月"+(n+1)+"日","19工单":0,"本地工单":0});for(var o in r.pop(),i.pop(),this.rawData){var u=this.rawData[o];if("广州"==this.rawData[o].responsible_province){for(var m=new Date(u.end_time),d=0;d<a;d++)if(m>t[d]&&m<t[d+1]){r[d]["19工单"]=r[d]["19工单"]+1,"1"==u.is_assess&&(i[d]["19工单"]=i[d]["19工单"]+1);break}m>t[a]&&(r[a]["19工单"]=r[a]["19工单"]+1,"1"==u.is_assess&&(i[a]["19工单"]=i[a]["19工单"]+1))}}for(var l in this.rawLocalData){for(var c=this.rawLocalData[l],_=new Date(c.end_time),h=0;h<a;h++)if(_>t[h]&&_<t[h+1]){r[h]["本地工单"]=r[h]["本地工单"]+1,"1"==c.is_trouble&&(i[h]["本地工单"]=i[h]["本地工单"]+1);break}_>t[a]&&(r[a]["本地工单"]=r[a]["本地工单"]+1,"1"==c.is_trouble&&(i[a]["本地工单"]=i[a]["本地工单"]+1))}this.sumDataArray.rows[2]=r,this.sumDataArray.rows[3]=i,this.sumDataArray.loading=!1;var p={columns:this.sumDataArray.columns[0],rows:this.sumDataArray.rows[0]};this.SumData=p,this.sumExtend.title={show:!0,text:this.sumDataArray.title[0]}},change:function(t){if(void 0!=this.timer&&clearTimeout(this.timer),this.playing&&(this.timer=setTimeout(this.change,5e3)),!this.sumDataArray.loading){this.sumDataArray.flag+1>=this.sumDataArray.length?this.sumDataArray.flag=0:this.sumDataArray.flag++;var e=this.sumDataArray.flag,a={columns:this.sumDataArray.columns[e],rows:this.sumDataArray.rows[e]};this.SumData=a,this.sumExtend.title={show:!0,text:this.sumDataArray.title[e]}}},play:function(){void 0!=this.timer?(clearTimeout(this.timer),this.timer=void 0,this.playing=!1,this.sumExtend.toolbox.feature.myPlay.show=!0,this.sumExtend.toolbox.feature.myPause.show=!1):(this.playing=!0,this.change(),this.sumExtend.toolbox.feature.myPlay.show=!1,this.sumExtend.toolbox.feature.myPause.show=!0)}}},g=b,y=Object(u["a"])(g,f,v,!1,null,"c0bf8a7e",null),x=y.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ve-histogram",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.showData,extend:t.extend,settings:t.settings}})],1)},O=[],T=(a("b680"),"10.117.195.193/gensmo/"),D={name:"orderCompare",data:function(){return{extend:{title:{show:!0,text:"所有故障量同比"},yAxis:function(t){return t[1].splitLine={show:!1},t},toolbox:{show:!0,feature:{myPause:{show:!0,title:"暂停轮播",icon:"path://M341.333333 113.777778a28.444444 28.444444 0 0 1 28.444445 28.444444v739.555556a28.444444 28.444444 0 0 1-56.888889 0V142.222222a28.444444 28.444444 0 0 1 28.444444-28.444444z m341.333334 0a28.444444 28.444444 0 0 1 28.444444 28.444444v739.555556a28.444444 28.444444 0 0 1-56.888889 0V142.222222a28.444444 28.444444 0 0 1 28.444445-28.444444z",onclick:this.play},myPlay:{show:!1,title:"继续轮播",icon:"path://M221.790362 1014.94374c-36.775578 0-68.472488-13.843286-91.662653-40.033785-23.130813-26.121937-35.868929-63.466474-35.868928-105.155968V154.424068c0-41.691541 12.739139-79.041194 35.869952-105.169271 23.193235-26.197662 54.889121-40.044018 91.662652-40.044018 27.752064 0 56.166207 8.159844 84.451414 24.25338l570.119699 358.735338 0.153496 0.088004c50.086745 28.728298 78.901001 72.395844 79.053474 119.806643 0 48.284703-28.559453 91.193978-80.418564 120.835066l-0.163729 0.093121L308.632219 989.273081C278.266631 1006.546489 249.860674 1014.94374 221.790362 1014.94374zM221.790362 63.144132c-44.709271 0-73.598228 35.82902-73.598228 91.279936v715.330942c0 55.43659 28.888957 91.2564 73.598228 91.2564 18.275225 0 38.137599-6.03239 59.034535-17.929348l0.165775-0.095167 566.30993-356.24154c35.544541-20.447704 54.333466-46.232974 54.333466-74.56423-0.105401-37.916565-32.837896-62.23953-52.339042-73.362868l-1.198292-0.713244L278.571576 79.725786l-0.169868-0.096191C259.408121 68.843948 239.833297 63.144132 221.790362 63.144132z",onclick:this.play},myChange:{show:!0,title:"切换维度",icon:"path://M480 32a32 32 0 0 0 32 32c119.664 0 232.16 46.608 316.768 131.232C913.392 279.84 960 392.336 960 512c0 118.096-45.472 229.168-128 313.392V736a32 32 0 0 0-64 0v192h192a32 32 0 0 0 0-64h-76.416C974.16 768.512 1024 644.112 1024 512c0-136.752-53.264-265.328-149.984-362.032C777.328 53.264 648.752 0 512 0a32 32 0 0 0-32 32zM149.984 874.032C246.672 970.736 375.248 1024 512 1024a32 32 0 0 0 0-64c-119.664 0-232.16-46.608-316.768-131.232C110.608 744.16 64 631.664 64 512c0-118.096 45.472-229.168 128-313.392V288a32 32 0 0 0 64 0V96H64a32 32 0 0 0 0 64h76.416C49.84 255.488 0 379.888 0 512c0 136.752 53.264 265.328 149.984 362.032z",onclick:this.change},saveAsImage:{show:!0}}}},dataArray:{length:4,flag:0,title:["所有故障量同比","责任故障量同比","所有故障量环比","责任故障量环比"],columns:[["时间","去年故障量","故障量","同比"],["时间","去年故障量","故障量","同比"],["时间","故障量","环比"],["时间","故障量","环比"]],rows:[]},showData:{columns:["时间","去年故障量","故障量","同比"],rows:[]},settings:{showLine:["同比","环比"],yAxisType:["value","percent"],axisSite:{right:["环比","同比"]}},rawData:[],rawDataLast:[],currentMonth:-1,ready:0,loading:!0,timer:void 0,playing:!0}},created:function(){this.init()},methods:{init:function(){console.log("[orderCompare]init"),this.getData()},getData:function(){var t=this,e=this,a=new Date;a.setDate(a.getDate()-1),a.setHours(23),a.setMinutes(59),a.setSeconds(59),this.currentMonth=a.getMonth();var s=new Date(a);s.setDate(1),s.setMonth(0),s.setHours(0),s.setMinutes(0),s.setSeconds(0);for(var r=function(r){var i=new Date(s);i.setMonth(r);var n=t.getEnd(a,r);t.getOrder(i.Format("yyyy-MM-dd hh:mm:ss"),n.Format("yyyy-MM-dd hh:mm:ss"),(function(t){"success"==t.data.status?(e.rawData[r]={sum:t.data.sum,data:t.data.result},e.ready++,e.ready>=e.currentMonth+13&&e.get_union()):e.$message.error("[orderCompare]Error:"+t.data.errMsg)}))},i=0;i<=this.currentMonth;i++)r(i);var n=new Date(s);n.setFullYear(n.getFullYear()-1);var o=new Date(a);o.setFullYear(o.getFullYear()-1);for(var u=function(a){var s=new Date(n);s.setMonth(a);var r=t.getEnd(o,a);t.getOrder(s.Format("yyyy-MM-dd hh:mm:ss"),r.Format("yyyy-MM-dd hh:mm:ss"),(function(t){"success"==t.data.status?(e.rawDataLast[a]={sum:t.data.sum,data:t.data.result},e.ready++,e.ready>=e.currentMonth+13&&e.get_union()):e.$message.error("[orderCompare]Error:"+t.data.errMsg)}))},m=0;m<12;m++)u(m)},getEnd:function(t,e){var a=new Date(t),s=a.getDate();if(s<29)return a.setMonth(e),a;var r=a.getFullYear(),i=!1;switch((r%400==0||r%4==0&&r%100!=0)&&(i=!0),e){case 0:case 2:case 4:case 6:case 7:case 9:case 11:return a.setMonth(e),a;case 1:return i&&29==s?a.setMonth(e):(a.setDate(28),a.setMonth(e)),a;case 3:case 5:case 8:case 10:return s<31?a.setMonth(e):(a.setDate(30),a.setMonth(e)),a}},getOrder:function(t,e,a){var s=this,r=new FormData;r.append("START",t),r.append("END",e),r.append("token","dGVtcDgzMDgwOTMzMjQ0NDg="),r.append("province","广东省广州市"),this.axios.post("http://"+T+"scripts/assess_order/get_gz_order_by_datetime.php",r).then((function(t){a(t)})).catch((function(t){s.$message.error("[orderCompare]Network Error:"+t)}))},get_union:function(){for(var t=0;t<=this.currentMonth;t++){var e=this.rawData[t].data,a=0;for(var s in e)"广州"==e[s].responsible_province&&"1"==e[s].is_assess&&a++;this.rawData[t].reSum=a}for(var r=0;r<=this.currentMonth;r++){var i=this.rawDataLast[r].data,n=0;for(var o in i)"广州"==i[o].responsible_province&&"1"==i[o].is_assess&&n++;this.rawDataLast[r].reSum=n}this.dataArray.rows=[[],[],[],[]];for(var u=0;u<=this.currentMonth;u++){var m=this.rawData[u].sum,d=this.rawDataLast[u].sum,l=((m-d)/d).toFixed(2);l="NaN"==l?0:l,this.dataArray.rows[0][u]={"时间":u+1+"月","去年故障量":d,"故障量":m,"同比":l};var c=this.rawData[u].reSum,_=this.rawDataLast[u].reSum,h=((c-_)/_).toFixed(2);h="NaN"==h?0:h,this.dataArray.rows[1][u]={"时间":u+1+"月","去年故障量":_,"故障量":c,"同比":h};var p=void 0,f=void 0;0==u?(p=((this.rawData[u].sum-this.rawDataLast[11].sum)/this.rawDataLast[11].sum).toFixed(2),f=((this.rawData[u].reSum-this.rawDataLast[11].reSum)/this.rawDataLast[11].reSum).toFixed(2)):(p=((this.rawData[u].sum-this.rawData[u-1].sum)/this.rawData[u-1].sum).toFixed(2),f=((this.rawData[u].reSum-this.rawData[u-1].reSum)/this.rawData[u-1].reSum).toFixed(2)),p="NaN"==p?0:p,f="NaN"==f?0:f,this.dataArray.rows[2][u]={"时间":u+1+"月","故障量":this.rawData[u].sum,"环比":p},this.dataArray.rows[3][u]={"时间":u+1+"月","故障量":this.rawData[u].reSum,"环比":f}}this.loading=!1,this.showData.rows=this.dataArray.rows[0],this.timer=setTimeout(this.change,5e3)},change:function(){if(void 0!=this.timer&&clearTimeout(this.timer),this.playing&&(this.timer=setTimeout(this.change,5e3)),!this.loading){this.dataArray.flag+1>=this.dataArray.length?this.dataArray.flag=0:this.dataArray.flag++;var t=this.dataArray.flag;this.showData.rows=this.dataArray.rows[t],this.showData.columns=this.dataArray.columns[t],this.extend.title={show:!0,text:this.dataArray.title[t]}}},play:function(){void 0!=this.timer?(clearTimeout(this.timer),this.timer=void 0,this.playing=!1,this.extend.toolbox.feature.myPlay.show=!0,this.extend.toolbox.feature.myPause.show=!1):(this.playing=!0,this.change(),this.extend.toolbox.feature.myPlay.show=!1,this.extend.toolbox.feature.myPause.show=!0)}}},P=D,L=Object(u["a"])(P,w,O,!1,null,"46a82bfb",null),j=L.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"timeout_container"},[a("div",{staticClass:"timecount"},[a("div",{staticClass:"title"},[t._v(" 考核指标 "),a("vxe-button",{attrs:{status:"primary",icon:"vxe-icon--d-arrow-right",id:"btn_daily"},on:{click:t.toDaily}},[t._v("每日通报")])],1),a("vxe-table",{attrs:{align:"center",data:t.timeCount,"max-height":"90%","auto-resize":""}},[a("vxe-table-column",{attrs:{width:"26%",field:"item",title:"考核项目"}}),a("vxe-table-column",{attrs:{width:"17%",field:"sum",title:"总工单数"}}),a("vxe-table-column",{attrs:{width:"17%",field:"timeout",title:"超时数"}}),a("vxe-table-column",{attrs:{width:"20%",field:"time",title:"平均历时(分钟)"}}),a("vxe-table-column",{attrs:{width:"20%",field:"rate",title:"及时率"}})],1)],1),a("div",{staticClass:"timeout"},[a("div",{staticClass:"title"},[t._v(" 重要客户故障与超时工单 "),a("vxe-button",{attrs:{type:"text",id:"btn_switch"},on:{click:function(e){t.timeoutMode=1-t.timeoutMode}}},[t._v(t._s(1==t.timeoutMode?"显示所有":"仅显示超时"))]),a("vxe-button",{attrs:{status:"primary",icon:"vxe-icon--d-arrow-right",id:"btn_list"},on:{click:t.toList}},[t._v("考核工单详情")]),a("vxe-modal",{attrs:{title:"添加澄清","lock-scroll":!1,"show-footer":"",width:"50vw"},on:{confirm:t.addReduce},model:{value:t.isAdd,callback:function(e){t.isAdd=e},expression:"isAdd"}},[a("vxe-table",{attrs:{"show-overflow":"",height:"auto",align:"center","sync-resize":t.isAdd,border:"",data:t.reduce,"edit-config":{trigger:"click",mode:"cell",activeMethod:t.not_edit_id}}},[a("vxe-table-column",{attrs:{field:"id",title:"故障单编号",width:"50%","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"province",title:"澄清归属",width:"30%","edit-render":{name:"input",attrs:{type:"text"}}}}),a("vxe-table-column",{attrs:{field:"time",title:"澄清历时",width:"20%","edit-render":{name:"$input",props:{type:"number"}}}})],1)],1)],1),a("vxe-table",{attrs:{align:"center",border:"","highlight-hover-row":"","max-height":"90%","auto-resize":"",resizable:"","cell-class-name":t.cell_class,data:1==t.timeoutMode?t.timeoutList:t.showList},on:{"cell-dblclick":t.dbClick}},[a("vxe-table-column",{attrs:{width:"24%",field:"id",title:"故障单编号"}}),a("vxe-table-column",{attrs:{width:"11%",field:"timeLimit",title:"故障时限(分钟)"}}),a("vxe-table-column",{attrs:{width:"13%",field:"timeText",title:"故障历时(分钟)"}}),a("vxe-table-column",{attrs:{width:"12%",field:"netTime",title:"修复净历时(分钟)"}}),a("vxe-table-column",{attrs:{width:"10%",field:"mark",title:"标记",filters:t.TOPList,"filter-multiple":!1,"filter-method":t.filterMethodStrict}}),a("vxe-table-column",{attrs:{width:"10%",field:"duty",title:"责任专业",filters:[{label:"广州责任",value:!0},{label:"非广州责任",value:!1}],"filter-multiple":!1,"filter-method":t.responsibleFilter}}),a("vxe-table-column",{attrs:{width:"17%",field:"reason",title:"故障原因","show-overflow":""}})],1)],1)])])},k=[],M=(a("c975"),a("13d5"),a("fb6a"),a("a9e3"),"10.117.195.193/gensmo/"),F={name:"timeout",props:["wywData","edit"],watch:{wywData:function(){this.rawData=this.wywData,this.count()}},data:function(){return{timeCount:[],timeoutList:[],showList:[],timeoutMode:1,rawData:[],reduce:[{id:"",province:"",time:0,maxTime:0,timeLimit:0}],isAdd:!1,TOPList:[{label:"TOP33",value:"TOP33"},{label:"TOP210",value:"TOP210"},{label:"TOP800",value:"TOP800"}]}},created:function(){this.init()},methods:{init:function(){console.log("timeout init")},count:function(){var t=[{item:"TOP33",sum:0,timeout:0,rate:"100.0%",time:0,timeSum:0},{item:"TOP800家1-2级",sum:0,timeout:0,rate:"100.0%",time:0,timeSum:0},{item:"TOP800家3-6级",sum:0,timeout:0,rate:"100.0%",time:0,timeSum:0},{item:"所有客户",sum:0,timeout:0,rate:"100.0%",time:0,timeSum:0},{item:"TOP210",sum:0,timeout:0,rate:"100.0",time:0,timeSum:0}];for(var e in this.timeoutList=[],this.showList=[],this.rawData){var a=this.rawData[e];if("广东省广州市"==a.province&&1==a.is_assess){var s="广州"==a.responsible_province,r="1"==a.time_out&&s,i=r||Number(a.time)>Number(a.time_limit);if(s&&(t[3].sum++,t[3].timeSum=t[3].timeSum+Number(a.assessment_time),t[3].time=(t[3].timeSum/t[3].sum).toFixed(2)),r&&s&&t[3].timeout++,t[3].rate=Number((t[3].sum-t[3].timeout)/t[3].sum*100).toFixed(2)+"%","1"==a.assess_TOPN&&s)switch(a.level){case"一级":case"二级":t[1].sum++,t[1].timeSum=t[1].timeSum+Number(a.assessment_time),t[1].time=(t[1].timeSum/t[1].sum).toFixed(2),r&&t[1].timeout++,t[1].rate=Number((t[1].sum-t[1].timeout)/t[1].sum*100).toFixed(2)+"%";break;case"三级":case"四级":case"五级":case"六级":t[2].sum++,t[2].timeSum=t[2].timeSum+Number(a.assessment_time),t[2].time=(t[2].timeSum/t[2].sum).toFixed(2),r&&t[2].timeout++,t[2].rate=Number((t[2].sum-t[2].timeout)/t[2].sum*100).toFixed(2)+"%";break}if("1"==a.TOP33&&(i=!0,s&&(t[0].sum++,t[0].timeSum=t[0].timeSum+Number(a.assessment_time),t[0].time=(t[0].timeSum/t[0].sum).toFixed(2),r&&t[0].timeout++,t[0].rate=Number((t[0].sum-t[0].timeout)/t[0].sum*100).toFixed(2)+"%")),"1"==a.TOP210&&s&&(r=r||Number(a.net_duration)>120,t[4].sum++,t[4].timeSum=t[4].timeSum+Number(a.net_duration),t[4].time=(t[4].timeSum/t[4].sum).toFixed(2),Number(a.net_duration)>120&&t[4].timeout++,t[4].rate=Number((t[4].sum-t[4].timeout)/t[4].sum*100).toFixed(2)+"%"),r||i){var n="";"1"==a.TOP33&&(n+="TOP33 "),"1"==a.assess_TOPN&&(n+="TOP800 "),"1"==a.TOP210&&(n+="TOP210 "),n=n.slice(0,-1);var o=a.time;parseInt(a.reduce_time)>0&&(o=o+"(-"+a.reduce_time+"="+a.assessment_time+")");var u=a.major;s||(u=a.responsible_province);var m={id:a.orderId,timeLimit:a.time_limit,time:a.time,reduce_time:a.reduce_time,timeText:o,duty:u,netTime:a.net_duration,reason:a.trouble_reason_symptom,mark:n,responsible_province:a.responsible_province};r&&this.timeoutList.push(m),i&&this.showList.push(m)}}}this.timeCount=t,this.reduce=[{id:"",province:"",time:0,maxTime:0,timeLimit:0}]},cell_class:function(t){var e=t.row,a=(t.rowIndex,t.column,t.columnIndex);if(2==a){if(Number(e.time)-Number(e.reduce_time)>Number(e.timeLimit))return"cell_timeout";if(Number(e.reduce_time)>0)return"cell_not_responsible"}return 3==a&&e.mark.indexOf("TOP210")>=0&&Number(e.netTime)>120?"cell_timeout":5==a&&"广州"!=e.responsible_province?"cell_not_responsible":void 0},addReduce:function(){if(parseInt(this.reduce[0].time)>parseInt(this.reduce[0].maxTime))this.$XModal.message({message:"澄清时间不能大于故障历时",status:"warning"});else{var t=this,e=new FormData;e.append("id",this.reduce[0].id),e.append("province",this.reduce[0].province),e.append("time",this.reduce[0].maxTime),e.append("reduce_time",this.reduce[0].time),e.append("time_limit",this.reduce[0].timeLimit),e.append("token","dGVtcDgzMDgwOTMzMjQ0NDg="),this.axios.post("http://"+M+"scripts/assess_order/add_reduce.php",e).then((function(e){if("success"==e.data.status)if("1"==e.data.row){for(var a in t.$XModal.message({message:"修改成功"}),t.rawData){var s=t.rawData[a];if(s.orderId==t.reduce[0].id){s.reduce_time=t.reduce[0].time,""!=t.reduce[0].province&&(s.responsible_province=t.reduce[0].province);var r=parseInt(t.reduce[0].maxTime)-parseInt(t.reduce[0].time);s.assessment_time=r,r<=t.reduce[0].timeLimit?s.time_out="0":s.time_out="1",t.rawData[a]=s;break}}t.count()}else console.log(e),t.$XModal.message({message:"未找到工单或无改动",status:"warning"});else alert(e.data.errMsg)})).catch((function(t){alert(t)}))}},dbClick:function(t){this.edit&&(this.reduce[0].id=t.row.id,this.reduce[0].maxTime=t.row.time,this.reduce[0].timeLimit=t.row.timeLimit,this.isAdd=!this.isAdd)},not_edit_id:function(t){t.column;var e=t.columnIndex;return 0!==e},filterMethodStrict:function(t){var e=t.row,a=t.column,s=t.option;return e[a.property].indexOf(s.value)>=0},responsibleFilter:function(t){var e=t.row,a=t.option,s="广州"==e.responsible_province;return a.value==s},toDaily:function(){this.$router.push({name:"daily",params:{}})},toList:function(){this.$router.push({name:"orderList",params:{}})}}},S=F,N=(a("b4a1"),Object(u["a"])(S,I,k,!1,null,null,null)),R=N.exports,C="10.117.195.193/gensmo/";Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t};var U={name:"Index",components:{sumLine:x,orderCompare:j,timeout:R},data:function(){return{rawData:[],rawLocalData:[],importFlag:!1,import_text:"导入19数据（请选择“沃运维”系统导出的故障单列表）",timer:void 0,edit:!1}},created:function(){this.init()},methods:{init:function(){1==this.$route.query.edit&&(this.edit=!0);var t=new Date;t.setDate(t.getDate()-1),t.setHours(23),t.setMinutes(59),t.setSeconds(59);var e=new Date(t);e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),this.getData(e.Format("yyyy-MM-dd hh:mm:ss"),t.Format("yyyy-MM-dd hh:mm:ss"))},getData:function(t,e){var a=this;void 0!=a.timer&&(clearTimeout(a.timer),a.timer=void 0),a.dataReady=!1,a.dataLocalReady=!1;var s=new FormData;s.append("START",t),s.append("END",e),this.axios.post("http://"+C+"scripts/assess_order/get_order_by_datetime.php",s).then((function(t){"success"==t.data.status?(a.rawData=t.data.result,a.sum=t.data.sum,a.dataReady=!0,a.dataReady&&a.dataLocalReady&&a.setTimer()):alert(t.data.errMsg)})).catch((function(t){alert(t)}));var r=new FormData;r.append("id",""),r.append("name",""),r.append("start_time_start",""),r.append("start_time_end",""),r.append("end_time_start",t),r.append("end_time_end",e),r.append("number",""),r.append("index",""),r.append("limit",""),r.append("step",""),this.axios.post("http://"+C+"scripts/getList.php",r).then((function(t){"success"==t.data.status?(a.rawLocalData=t.data.result,a.dataLocalReady=!0,a.dataReady&&a.dataLocalReady&&a.setTimer()):alert(t.data.errMsg)})).catch((function(t){alert(t)}))},setTimer:function(){var t=this,e=new Date;e.setDate(e.getDate()-1),e.setHours(23),e.setMinutes(59),e.setSeconds(59);var a=new Date(e);a.setDate(1),a.setHours(0),a.setMinutes(0),a.setSeconds(0),void 0!=this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){t.getData(a.Format("yyyy-MM-dd hh:mm:ss"),e.Format("yyyy-MM-dd hh:mm:ss"))}),6e5)},import19:function(){this.$refs.filElem.dispatchEvent(new MouseEvent("click"))},get_file:function(){var t=this;if(!t.importFlag)if(t.importFlag=!0,t.import_text="导入中，请稍后...",""!=this.$refs.filElem.value){var e=this.$refs.filElem.files[0],a=new FormData;a.append("file",e),this.axios.post("http://"+C+"scripts/assess_order/import_from_19.php",a).then((function(e){if(t.importFlag=!1,t.import_text="导入19数据（请选择“沃运维”系统导出的故障单列表）","success"==e.data.status){alert("成功导入"+e.data.sum+"条记录!");var a=this,s=new Date,r=new Date;s.setDate(1),s.setHours(0),s.setMinutes(0),s.setSeconds(0),a.getData(s.Format("yyyy-MM-dd hh:mm:ss"),r.Format("yyyy-MM-dd hh:mm:ss"))}else console.log(e),alert("错误:"+e.data.errMsg);t.$refs.filElem.value=""})).catch((function(e){console.log(e),t.importFlag=!1,t.import_text="导入19数据（请选择“沃运维”系统导出的故障单列表）",t.$refs.filElem.value=""}))}else t.importFlag=!1}}},E=U,q=(a("62ac"),Object(u["a"])(E,h,p,!1,null,"747cf645",null)),z=q.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"daily_container"},[a("vxe-button",{attrs:{type:"text",icon:"vxe-icon--d-arrow-left",id:"btn_back"},on:{click:t.toBack}},[t._v("返回")]),a("div",{staticClass:"title"},[t._v(t._s(t.now)+"政企网络服务中台考核指标通报")]),a("vxe-table",{ref:"xTable",staticClass:"table",attrs:{border:"",align:"center",data:t.dailyData,"span-method":t.colspanMethod,"header-cell-class-name":t.headerCellClassName,"footer-cell-class-name":t.footerCellClassName,"cell-class-name":t.cellClassName,size:"mini",loading:!t.dataReady,"show-footer":"","footer-method":t.showRemark,"footer-span-method":t.spanRemark,"auto-resize":""},on:{"header-cell-dblclick":t.copy_desc}},[a("vxe-table-column",{staticClass:"desc",attrs:{title:t.dailyDesc,align:"left"}},[a("vxe-table-column",{attrs:{width:"17%",field:"item",title:"考核项目"}}),a("vxe-table-column",{attrs:{width:"6%",field:"duty",title:"责任专业"}}),a("vxe-table-column",{attrs:{width:"6%",field:"target",formatter:t.to100,title:"目标"}}),t._l(t.days,(function(e,s){return a("vxe-table-column",t._b({key:s,attrs:{width:"6%",formatter:t.to100}},"vxe-table-column",e,!1))})),a("vxe-table-column",{attrs:{width:"6%",field:"compare",formatter:t.to100,title:"环比"}}),a("vxe-table-column",{attrs:{width:"6%",field:"toTarget",formatter:t.to100,title:"目标比"}}),a("vxe-table-column",{attrs:{width:"17%",field:"desc",align:"left","header-align":"center",title:"概况"}}),a("vxe-table-column",{attrs:{width:"6%",field:"sum",formatter:t.to100,title:"总计"}}),a("vxe-table-column",{attrs:{width:"6%",field:"sumToTarget",formatter:t.to100,title:"总目标比"}})],2)],1)],1)},A=[],B="10.117.195.193/gensmo/",H=22,V=2294;Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t};var Y={name:"Daily",components:{},data:function(){return{days:[],dailyData:[{item:"责任故障重复次数",target:0,targetType:"<"},{item:"TOP33责任故障次数",target:11,targetType:"<"},{item:"TOP33责任故障历时",target:100,targetType:"<"},{item:"集团直属客户故障及时率",target:.9,duty:"传输",targetType:">"},{item:"集团直属客户故障及时率",target:.9,duty:"数据",targetType:">"},{item:"集团直属客户故障及时率",target:.9,duty:"交换",targetType:">"},{item:"集团直属客户故障及时率",target:.9,duty:"政企云",targetType:">"},{item:"集团直属客户故障及时率",target:.9,duty:"其他",targetType:">"},{item:"TOP800家1-2级故障及时率",target:.9,duty:"传输",targetType:">"},{item:"TOP800家1-2级故障及时率",target:.9,duty:"数据",targetType:">"},{item:"TOP800家1-2级故障及时率",target:.9,duty:"交换",targetType:">"},{item:"TOP800家1-2级故障及时率",target:.9,duty:"政企云",targetType:">"},{item:"TOP800家1-2级故障及时率",target:.9,duty:"其他",targetType:">"},{item:"TOP800家3-6级故障及时率",target:.95,duty:"传输",targetType:">"},{item:"TOP800家3-6级故障及时率",target:.95,duty:"数据",targetType:">"},{item:"TOP800家3-6级故障及时率",target:.95,duty:"交换",targetType:">"},{item:"TOP800家3-6级故障及时率",target:.95,duty:"政企云",targetType:">"},{item:"TOP800家3-6级故障及时率",target:.95,duty:"其他",targetType:">"},{item:"TOP800家客户故障及时率",target:.95,duty:"传输",targetType:">"},{item:"TOP800家客户故障及时率",target:.95,duty:"数据",targetType:">"},{item:"TOP800家客户故障及时率",target:.95,duty:"交换",targetType:">"},{item:"TOP800家客户故障及时率",target:.95,duty:"政企云",targetType:">"},{item:"TOP800家客户故障及时率",target:.95,duty:"其他",targetType:">"},{item:"所有客户故障及时率",target:.95,duty:"传输",targetType:">"},{item:"所有客户故障及时率",target:.95,duty:"数据",targetType:">"},{item:"所有客户故障及时率",target:.95,duty:"交换",targetType:">"},{item:"所有客户故障及时率",target:.95,duty:"政企云",targetType:">"},{item:"所有客户故障及时率",target:.95,duty:"其他",targetType:">"},{item:"发函投诉",target:0,targetType:"<",day0:0,day1:0,day2:0,day3:0,day4:0,sum:0,toTarget:0,sumToTarget:0}],rawData:[],dataReady:!1,assessData:[],now:"",dailyDesc:"",desc_arr:[{fmt:"1、责任故障重复次数，{d}次，{t}；\r\n",index:0,type:"number"},{fmt:"2、TOP33责任故障次数，{d}次，{t}；",index:1,type:"number"},{fmt:"全年累计责任故障次数，{d}次，{t}；\r\n",index:"TOP33_sum",type:"number"},{fmt:"3、TOP33责任平均历时，{d}分钟，{t}；",index:2,type:"float"},{fmt:"全年责任平均历时{d}分钟，{t}；\r\n",index:"TOP33_time",type:"float"},{fmt:"4、集团直属客户故障及时率，{d}，{t}；\r\n",index:3,type:"percent"},{fmt:"5、TOP800家1-2级客户故障及时率，{d}，{t}；\r\n",index:8,type:"percent"},{fmt:"6、TOP800家3-6级客户故障及时率，{d}，{t}；\r\n",index:13,type:"percent"},{fmt:"7、TOP800家客户故障及时率，{d}，{t}；\r\n",index:18,type:"percent"},{fmt:"8、所有客户故障及时率，{d}，{t}；\r\n",index:23,type:"percent"},{fmt:"9、客户发函投诉，{d}，{t}。",index:28,type:"number"}]}},created:function(){this.init()},updated:function(){},methods:{init:function(){this.dailyData["TOP33_sum"]={item:"TOP33全年累计",target:139,targetType:"<"},this.dailyData["TOP33_time"]={item:"TOP33全年平均历时",target:112,targetType:"<"};var t=new Date;this.now=t.Format("yyyy年MM月dd日"),t.setDate(t.getDate()-1),t.setHours(23),t.setMinutes(59),t.setSeconds(59);var e,a=t.getDate(),s=new Date(t);s.setHours(23),s.setMinutes(59),s.setSeconds(59),e=a<5?1:a-4,s.setDate(e),this.days=[];for(var r=0;r<=a-e;r++){var i={field:"day"+r,title:t.getMonth()+1+"月"+(e+r)+"日"};this.days.push(i);var n=new Date(s);n.setDate(e+r),this.assessData.push({dateLimit:n,data:[]})}var o=new Date(t);o.setDate(1),o.setHours(0),o.setMinutes(0),o.setSeconds(0),this.getData(o.Format("yyyy-MM-dd hh:mm:ss"),t.Format("yyyy-MM-dd hh:mm:ss"))},refresh:function(){var t=this.$refs.xTable;t.updateData()},colspanMethod:function(t){t.row;var e=t.rowIndex,a=(t.column,t.columnIndex);t.data;if(0==a)switch(e){case 0:case 1:case 2:case 28:return{rowspan:1,colspan:2};case 3:case 8:case 13:case 18:case 23:return{rowspan:5,colspan:1};default:return{rowspan:0,colspan:0}}if(1==a)switch(e){case 0:case 1:case 2:case 28:return{rowspan:0,colspan:0}}if(2==a||a==6+this.days.length||a==7+this.days.length)switch(e){case 0:case 1:case 2:case 28:return{rowspan:1,colspan:1};case 3:case 8:case 13:case 18:case 23:return{rowspan:5,colspan:1};default:return{rowspan:0,colspan:0}}return{rowspan:1,colspan:1}},getData:function(t,e){var a=this;a.dataReady=!1;var s=new FormData;s.append("START",t),s.append("END",e),s.append("token","dGVtcDgzMDgwOTMzMjQ0NDg="),s.append("province","广东省广州市"),this.axios.post("http://"+B+"scripts/assess_order/get_gz_order_by_datetime.php",s).then((function(t){if("success"==t.data.status){for(var e in a.rawData=t.data.result,a.rawData){var s=a.rawData[e];if("广州"==s.responsible_province&&0!=s.is_assess){var r=new Date(s.end_time);for(var i in a.assessData)a.assessData[i].dateLimit-r>0&&a.assessData[i].data.push(s)}}console.log(a.assessData),a.judge(a.judgeRepeat,"sum",0,(function(t){a.dailyData[0]["toTarget"]=t.sum-a.dailyData[0]["target"],a.dailyData[0]["desc"]="TOP33重复故障次数"+t.TOP33+",TOP800重复故障次数"+t.TOP800,a.dailyData[0]["sum"]=t.sum,a.dailyData[0]["sumToTarget"]=t.sum-a.dailyData[0]["target"]})),a.judge(a.judgeTOP33,"sum",1,(function(t){a.dailyData[1]["sum"]=t.sum,a.dailyData[1]["sumToTarget"]=a.dailyData[1]["sum"]-a.dailyData[1]["target"],a.dailyData[1]["desc"]="2020年累计责任故障"+(t.sum+H)+"次",a.dailyData["TOP33_sum"]["sum"]=t.sum+H,a.dailyData["TOP33_sum"]["sumToTarget"]=a.dailyData["TOP33_sum"]["sum"]-a.dailyData["TOP33_sum"]["target"]})),a.judge(a.judgeTOP33,"time",2,(function(t){a.dailyData[2]["sum"]=t.time,a.dailyData[2]["sumToTarget"]=a.dailyData[2]["sum"]-a.dailyData[2]["target"];var e=(V+t.timeSum)/(H+t.sum);a.dailyData[2]["desc"]="2020年平均历时"+e.toFixed(2)+"分钟",a.dailyData["TOP33_time"]["sum"]=e,a.dailyData["TOP33_time"]["sumToTarget"]=a.dailyData["TOP33_time"]["sum"]-a.dailyData["TOP33_time"]["target"]})),a.judge(a.judgeTOP210,"cs",3,(function(t){a.dailyData[3]["desc"]="共"+t.cs_sum+"单，超时"+t.cs_timeout+"单",t.sum>0?a.dailyData[3]["sum"]=(t.sum-t.timeout)/t.sum:a.dailyData[3]["sum"]=1,a.dailyData[3]["sumToTarget"]=a.dailyData[3]["sum"]-a.dailyData[3]["target"]})),a.judge(a.judgeTOP210,"sj",4,(function(t){a.dailyData[4]["desc"]="共"+t.sj_sum+"单，超时"+t.sj_timeout+"单"})),a.judge(a.judgeTOP210,"jh",5,(function(t){a.dailyData[5]["desc"]="共"+t.jh_sum+"单，超时"+t.jh_timeout+"单"})),a.judge(a.judgeTOP210,"zq",6,(function(t){a.dailyData[6]["desc"]="共"+t.zq_sum+"单，超时"+t.zq_timeout+"单"})),a.judge(a.judgeTOP210,"qt",7,(function(t){a.dailyData[7]["desc"]="共"+t.qt_sum+"单，超时"+t.qt_timeout+"单"})),a.judge(a.judgeTOP800_1_2,"cs",8,(function(t){a.dailyData[8]["desc"]="共"+t.cs_sum+"单，超时"+t.cs_timeout+"单",t.sum>0?a.dailyData[8]["sum"]=(t.sum-t.timeout)/t.sum:a.dailyData[8]["sum"]=1,a.dailyData[8]["sumToTarget"]=a.dailyData[8]["sum"]-a.dailyData[8]["target"]})),a.judge(a.judgeTOP800_1_2,"sj",9,(function(t){a.dailyData[9]["desc"]="共"+t.sj_sum+"单，超时"+t.sj_timeout+"单"})),a.judge(a.judgeTOP800_1_2,"jh",10,(function(t){a.dailyData[10]["desc"]="共"+t.jh_sum+"单，超时"+t.jh_timeout+"单"})),a.judge(a.judgeTOP800_1_2,"zq",11,(function(t){a.dailyData[11]["desc"]="共"+t.zq_sum+"单，超时"+t.zq_timeout+"单"})),a.judge(a.judgeTOP800_1_2,"qt",12,(function(t){a.dailyData[12]["desc"]="共"+t.qt_sum+"单，超时"+t.qt_timeout+"单"})),a.judge(a.judgeTOP800_3_6,"cs",13,(function(t){a.dailyData[13]["desc"]="共"+t.cs_sum+"单，超时"+t.cs_timeout+"单",t.sum>0?a.dailyData[13]["sum"]=(t.sum-t.timeout)/t.sum:a.dailyData[13]["sum"]=1,a.dailyData[13]["sumToTarget"]=a.dailyData[13]["sum"]-a.dailyData[13]["target"]})),a.judge(a.judgeTOP800_3_6,"sj",14,(function(t){a.dailyData[14]["desc"]="共"+t.sj_sum+"单，超时"+t.sj_timeout+"单"})),a.judge(a.judgeTOP800_3_6,"jh",15,(function(t){a.dailyData[15]["desc"]="共"+t.jh_sum+"单，超时"+t.jh_timeout+"单"})),a.judge(a.judgeTOP800_3_6,"zq",16,(function(t){a.dailyData[16]["desc"]="共"+t.zq_sum+"单，超时"+t.zq_timeout+"单"})),a.judge(a.judgeTOP800_3_6,"qt",17,(function(t){a.dailyData[17]["desc"]="共"+t.qt_sum+"单，超时"+t.qt_timeout+"单"})),a.judge(a.judgeTOP800,"cs",18,(function(t){a.dailyData[18]["desc"]="共"+t.cs_sum+"单，超时"+t.cs_timeout+"单",t.sum>0?a.dailyData[18]["sum"]=(t.sum-t.timeout)/t.sum:a.dailyData[18]["sum"]=1,a.dailyData[18]["sumToTarget"]=a.dailyData[18]["sum"]-a.dailyData[18]["target"]})),a.judge(a.judgeTOP800,"sj",19,(function(t){a.dailyData[19]["desc"]="共"+t.sj_sum+"单，超时"+t.sj_timeout+"单"})),a.judge(a.judgeTOP800,"jh",20,(function(t){a.dailyData[20]["desc"]="共"+t.jh_sum+"单，超时"+t.jh_timeout+"单"})),a.judge(a.judgeTOP800,"zq",21,(function(t){a.dailyData[21]["desc"]="共"+t.zq_sum+"单，超时"+t.zq_timeout+"单"})),a.judge(a.judgeTOP800,"qt",22,(function(t){a.dailyData[22]["desc"]="共"+t.qt_sum+"单，超时"+t.qt_timeout+"单"})),a.judge(a.judgeAll,"cs",23,(function(t){a.dailyData[23]["desc"]="共"+t.cs_sum+"单，超时"+t.cs_timeout+"单",t.sum>0?a.dailyData[23]["sum"]=(t.sum-t.timeout)/t.sum:a.dailyData[23]["sum"]=1,a.dailyData[23]["sumToTarget"]=a.dailyData[23]["sum"]-a.dailyData[23]["target"]})),a.judge(a.judgeAll,"sj",24,(function(t){a.dailyData[24]["desc"]="共"+t.sj_sum+"单，超时"+t.sj_timeout+"单"})),a.judge(a.judgeAll,"jh",25,(function(t){a.dailyData[25]["desc"]="共"+t.jh_sum+"单，超时"+t.jh_timeout+"单"})),a.judge(a.judgeAll,"zq",26,(function(t){a.dailyData[26]["desc"]="共"+t.zq_sum+"单，超时"+t.zq_timeout+"单"})),a.judge(a.judgeAll,"qt",27,(function(t){a.dailyData[27]["desc"]="共"+t.qt_sum+"单，超时"+t.qt_timeout+"单"})),a.countCompare(),a.setDesc(),a.refresh(),a.dataReady=!0}else alert(t.data.errMsg)})).catch((function(t){alert(t)}))},judgeRepeat:function(t){var e=[];for(var a in t)if(""!=t[a].circuit_number)if(void 0==e[t[a].circuit_number]){var s={sum:1};1==t[a].TOP33?s.TOP33=!0:s.TOP33=!1,1==t[a].assess_TOPN?s.TOP800=!0:s.TOP800=!1,e[t[a].circuit_number]=s}else e[t[a].circuit_number].sum++,e[t[a].circuit_number].sum>1&&console.log(t[a].circuit_number+"repeat:"+e[t[a].circuit_number].sum);var r={sum:0,TOP800:0,TOP33:0};for(var i in e)e[i].TOP800||e[i].TOP33?(r.sum=r.sum+e[i].sum-1,e[i].TOP800&&(r.TOP800=r.TOP800+e[i].sum-1),e[i].TOP33&&(r.TOP33=r.TOP33+e[i].sum-1)):e[i].sum>2&&(r.sum=r.sum+e[i].sum-2);return r},judgeTOP33:function(t){var e={sum:0,timeSum:0};for(var a in t)1==t[a].TOP33&&(e.sum++,e.timeSum=e.timeSum+Number(t[a].assessment_time));return e.sum>0?e.time=(e.timeSum/e.sum).toFixed(2):e.time=0,e},judgeTOP210:function(t){var e={sum:0,timeout:0,cs:1,cs_sum:0,cs_timeout:0,sj:1,sj_sum:0,sj_timeout:0,jh:1,jh_sum:0,jh_timeout:0,zq:1,zq_sum:0,zq_timeout:0,qt:1,qt_sum:0,qt_timeout:0};for(var a in t)if(0!=t[a].TOP210){e.sum++;var s=void 0;switch(t[a].major){case"传输":s="cs";break;case"数据":s="sj";break;case"交换":s="jh";break;case"政企云":s="zq";break;case"其他":s="qt";break;default:s="qt";break}e[s+"_sum"]++,Number(t[a].net_duration)>120&&(e.timeout++,e[s+"_timeout"]++),e[s]=(e[s+"_sum"]-e[s+"_timeout"])/e[s+"_sum"]}return e},judgeTOP800_1_2:function(t){var e={sum:0,timeout:0,cs:1,cs_sum:0,cs_timeout:0,sj:1,sj_sum:0,sj_timeout:0,jh:1,jh_sum:0,jh_timeout:0,zq:1,zq_sum:0,zq_timeout:0,qt:1,qt_sum:0,qt_timeout:0};for(var a in t)if(0!=t[a].assess_TOPN&&("一级"==t[a].level||"二级"==t[a].level)){e.sum++;var s=void 0;switch(t[a].major){case"传输":s="cs";break;case"数据":s="sj";break;case"交换":s="jh";break;case"政企云":s="zq";break;case"其他":s="qt";break;default:s="qt";break}e[s+"_sum"]++,"1"==t[a].time_out&&(e.timeout++,e[s+"_timeout"]++),e[s]=(e[s+"_sum"]-e[s+"_timeout"])/e[s+"_sum"]}return e},judgeTOP800_3_6:function(t){var e={sum:0,timeout:0,cs:1,cs_sum:0,cs_timeout:0,sj:1,sj_sum:0,sj_timeout:0,jh:1,jh_sum:0,jh_timeout:0,zq:1,zq_sum:0,zq_timeout:0,qt:1,qt_sum:0,qt_timeout:0};for(var a in t)if(0!=t[a].assess_TOPN&&("三级"==t[a].level||"四级"==t[a].level||"五级"==t[a].level||"六级"==t[a].level)){e.sum++;var s=void 0;switch(t[a].major){case"传输":s="cs";break;case"数据":s="sj";break;case"交换":s="jh";break;case"政企云":s="zq";break;case"其他":s="qt";break;default:s="qt";break}e[s+"_sum"]++,"1"==t[a].time_out&&(e.timeout++,e[s+"_timeout"]++),e[s]=(e[s+"_sum"]-e[s+"_timeout"])/e[s+"_sum"]}return e},judgeTOP800:function(t){var e={sum:0,timeout:0,cs:1,cs_sum:0,cs_timeout:0,sj:1,sj_sum:0,sj_timeout:0,jh:1,jh_sum:0,jh_timeout:0,zq:1,zq_sum:0,zq_timeout:0,qt:1,qt_sum:0,qt_timeout:0};for(var a in t)if(0!=t[a].assess_TOPN){e.sum++;var s=void 0;switch(t[a].major){case"传输":s="cs";break;case"数据":s="sj";break;case"交换":s="jh";break;case"政企云":s="zq";break;case"其他":s="qt";break;default:s="qt";break}e[s+"_sum"]++,"1"==t[a].time_out&&(e.timeout++,e[s+"_timeout"]++),e[s]=(e[s+"_sum"]-e[s+"_timeout"])/e[s+"_sum"]}return e},judgeAll:function(t){var e={sum:0,timeout:0,cs:1,cs_sum:0,cs_timeout:0,sj:1,sj_sum:0,sj_timeout:0,jh:1,jh_sum:0,jh_timeout:0,zq:1,zq_sum:0,zq_timeout:0,qt:1,qt_sum:0,qt_timeout:0};for(var a in t){e.sum++;var s=void 0;switch(t[a].major){case"传输":s="cs";break;case"数据":s="sj";break;case"交换":s="jh";break;case"政企云":s="zq";break;case"其他":s="qt";break;default:s="qt";break}e[s+"_sum"]++,"1"==t[a].time_out&&(e.timeout++,e[s+"_timeout"]++),e[s]=(e[s+"_sum"]-e[s+"_timeout"])/e[s+"_sum"]}return e},judge:function(t,e,a,s){var r,i=this;for(var n in i.assessData)r=t(i.assessData[n].data),i.dailyData[a]["day"+n]=r[e];s(r)},descFmt:function(t,e,a){var s=t.replace("{d}",e);return s=s.replace("{t}",a),s},setDesc:function(){for(var t in this.dailyDesc="",this.desc_arr){var e=this.desc_arr[t],a=this.dailyData[e.index],s="";switch(e.type){case"number":s=Number(a.sum).toFixed(0);break;case"float":s=Number(a.sum).toFixed(2);break;case"percent":s=(100*a.sum).toFixed(2)+"%";break;default:s=a.sum+""}var r=void 0;r="<"==a.targetType&&a.sumToTarget<=0||">"==a.targetType&&a.sumToTarget>=0?"达标":"不达标",this.dailyDesc=this.dailyDesc+this.descFmt(e.fmt,s,r)}},copy_desc:function(t){if(0==t.$rowIndex){var e="【"+this.now+"政企网络服务中台考核指标通报】\r\n"+this.dailyDesc;this.$copyText(e).then((function(t){console.log(t),alert("已复制到剪切板！")}),(function(t){alert("复制失败，请手动复制！")}))}},to100:function(t){var e=t.cellValue,a=(t.row,t.rowIndex);t.column,t.columnIndex;switch(a){case 0:case 1:case 28:return e;case 2:return Number(e).toFixed(2);default:return void 0!=e?"-"==e?"-":(100*e).toFixed(2)+"%":"-"}},headerCellClassName:function(t){switch(t.$rowIndex){case 0:return"desc";default:return"header"}},footerCellClassName:function(t){return"footer"},cellClassName:function(t){var e=t.row,a=(t.rowIndex,t.column);t.columnIndex;switch(a.property){case"day0":case"day1":case"day2":case"day3":case"day4":if(">"==e.targetType&&e[a.property]-e.target<0||"<"==e.targetType&&e[a.property]-e.target>0)return"mainWarn";break;case"sum":if(">"==e.targetType&&e[a.property]-e.target<0||"<"==e.targetType&&e[a.property]-e.target>0)return"warn";break;case"compare":case"toTarget":case"sumToTarget":if(">"==e.targetType&&e[a.property]<0||"<"==e.targetType&&e[a.property]>0)return"warn";break}return null},spanRemark:function(t){var e=t.columnIndex;return e==5+this.days.length?{rowspan:1,colspan:8+this.days.length}:{rowspan:0,colspan:0}},showRemark:function(){for(var t="备注：\n1、工单数据取自“沃运维”系统故障单日报，由程序自动下载并录入数据库，当月内数据累积\n2、故障恢复历时包括了挂起时间，这部分时间需要每周在澄清系统上进行澄清，澄清通过后会在后台手动录入澄清信息。\n3、专业分类依据为工单中的“主要处理部门”（对应表格EC列）字段",e=[],a=0;a<5+this.days.length;a++)e.push("");return e.push(t),[e]},countCompare:function(){var t=this.days[this.days.length-1].field;if(this.days.length>1)for(var e in this.dailyData){var a=this.days[this.days.length-2].field;void 0!=this.dailyData[e][t]?(void 0!=this.dailyData[e][a]?this.dailyData[e]["compare"]=Number(this.dailyData[e][t])-Number(this.dailyData[e][a]):this.dailyData[e]["compare"]="-",void 0!=this.dailyData[e]["target"]?this.dailyData[e]["toTarget"]=Number(this.dailyData[e][t])-Number(this.dailyData[e]["target"]):this.dailyData[e]["toTarget"]="-"):(this.dailyData[e]["compare"]="-",this.dailyData[e]["toTarget"]="-")}else for(var s in this.dailyData)this.dailyData[s]["compare"]="-",void 0!=this.dailyData[s][t]&&void 0!=this.dailyData[s]["target"]?this.dailyData[s]["toTarget"]=Number(this.dailyData[s][t])-Number(this.dailyData[s]["target"]):this.dailyData[s]["toTarget"]="-"},toBack:function(){this.$router.push({name:"index",params:{}})}}},G=Y,K=(a("f78b"),Object(u["a"])(G,$,A,!1,null,null,null)),Q=K.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orderList_container"},[a("vxe-button",{attrs:{type:"text",icon:"vxe-icon--d-arrow-left",id:"btn_back"},on:{click:t.toBack}},[t._v("返回")]),a("vxe-table",{ref:"xTable",staticClass:"table",attrs:{border:"",align:"center",data:t.assessData,"cell-class-name":t.cellClassName,size:"mini","max-height":"93%",loading:!t.dataReady,resizable:"","tooltip-config":{enterable:!0},"edit-config":{trigger:"click",mode:"cell",activeMethod:t.editMethod},"auto-resize":""},on:{"edit-closed":t.sendEdit,"edit-actived":t.beforeEdit}},[a("vxe-table-column",{attrs:{field:"orderId",width:"220px",title:"故障单编号",fixed:"left",filters:[{data:""}],"filter-method":t.filterMethod},scopedSlots:t._u([{key:"filter",fn:function(e){var s=e.$panel,r=e.column;return t._l(r.filters,(function(e,r){return a("input",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"option.data"}],key:r,attrs:{type:"type"},domProps:{value:e.data},on:{input:[function(a){a.target.composing||t.$set(e,"data",a.target.value)},function(t){return s.changeOption(t,!!e.data,e)}]}})}))}}])}),a("vxe-table-column",{attrs:{field:"name",width:"200px",title:"客户名称",fixed:"left",filters:[{data:""}],"filter-method":t.filterMethod},scopedSlots:t._u([{key:"filter",fn:function(e){var s=e.$panel,r=e.column;return t._l(r.filters,(function(e,r){return a("input",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"option.data"}],key:r,attrs:{type:"type"},domProps:{value:e.data},on:{input:[function(a){a.target.composing||t.$set(e,"data",a.target.value)},function(t){return s.changeOption(t,!!e.data,e)}]}})}))}}])}),a("vxe-table-column",{attrs:{field:"major",width:"80px",title:"责任专业",filters:t.majorList,"filter-method":t.filterMethodStrict,"edit-render":{name:"input",attrs:{type:"text"}}}}),a("vxe-table-column",{attrs:{field:"time_out",width:"55px",title:"是否超时",formatter:t.toBoolean,filters:t.booleanList,"filter-multiple":!1,"filter-method":t.filterMethodStrict}}),a("vxe-table-column",{attrs:{field:"level",width:"50px",title:"客户等级",filters:t.levelList,"filter-method":t.filterMethod}}),a("vxe-table-column",{attrs:{field:"TOP33",width:"50px",formatter:t.toBoolean,title:"TOP33",filters:t.booleanList,"filter-multiple":!1,"filter-method":t.filterMethodStrict}}),a("vxe-table-column",{attrs:{field:"TOP210",width:"50px",formatter:t.toBoolean,title:"TOP210",filters:t.booleanList,"filter-multiple":!1,"filter-method":t.filterMethodStrict}}),a("vxe-table-column",{attrs:{field:"assess_TOPN",width:"50px",formatter:t.toBoolean,title:"TOP800",filters:t.booleanList,"filter-multiple":!1,"filter-method":t.filterMethodStrict}}),a("vxe-table-column",{attrs:{field:"trouble_type",width:"90px",title:"业务类型",filters:t.bussinessList,"filter-method":t.filterMethodStrict}}),a("vxe-table-column",{attrs:{field:"circuit_number",width:"100px",title:"电路编号","show-overflow":"",enterable:""}}),a("vxe-table-column",{attrs:{field:"start_time",width:"150px",title:"故障开始时间"}}),a("vxe-table-column",{attrs:{field:"end_time",width:"150px",title:"故障结束时间"}}),a("vxe-table-column",{attrs:{field:"time",width:"55px",title:"故障历时"}}),a("vxe-table-column",{attrs:{field:"net_duration",width:"60px",title:"故障净历时"}}),a("vxe-table-column",{attrs:{field:"reduce_time",width:"55px",title:"澄清历时"}}),a("vxe-table-column",{attrs:{field:"assessment_time",width:"55px",title:"考核历时"}}),a("vxe-table-column",{attrs:{field:"time_limit",width:"55px",title:"考核时限",filters:t.timeLimitList,"filter-multiple":!1,"filter-method":t.filterMethodStrict}}),a("vxe-table-column",{attrs:{field:"reason",width:"220px",title:"故障原因","show-overflow":"",enterable:"","edit-render":{name:"input",attrs:{type:"text"}}}}),a("vxe-table-column",{attrs:{field:"is_trouble",width:"80px",formatter:t.toBoolean,title:"真实故障",filters:t.extraBooleanList,"filter-multiple":!1,"filter-method":t.filterMethodStrict,"edit-render":{name:"input",attrs:{type:"text"}}}}),a("vxe-table-column",{attrs:{field:"trouble_class",width:"80px",title:"故障大类",filters:t.troubleClassList,"filter-method":t.filterMethodStrict,"edit-render":{name:"input",attrs:{type:"text"}}}}),a("vxe-table-column",{attrs:{field:"trouble_reason",width:"80px",title:"故障原因细分","edit-render":{name:"input",attrs:{type:"text"}}}}),a("vxe-table-column",{attrs:{field:"remark",width:"100px",formatter:t.hideMark,title:"备注","edit-render":{name:"input",attrs:{type:"text"}}}})],1),a("div",{attrs:{id:"tips"}},[t._v("故障单编号标"),a("font",{attrs:{color:"red"}},[t._v("红色")]),t._v("为超时工单，标"),a("font",{attrs:{color:"#5ab1ef"}},[t._v("蓝色")]),t._v("预计可澄清非广州责任，标"),a("font",{attrs:{color:"#19d4ae"}},[t._v("绿色")]),t._v("预计澄清历时后不超时，标"),a("font",{attrs:{color:"#c4b4e4"}},[t._v("紫色")]),t._v("表示澄清存在争议，待沟通解决。")],1)],1)},W=[],X=(a("466d"),"10.117.195.193/gensmo/");Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t};var Z={name:"OrderList",components:{},data:function(){return{edit:!1,days:[],dailyData:[],rawData:[],dataReady:!1,assessData:[],levelList:[{label:"一级",value:"一级"},{label:"二级",value:"二级"},{label:"三级",value:"三级"},{label:"四级",value:"四级"},{label:"五级",value:"五级"},{label:"六级",value:"六级"}],booleanList:[{label:"是",value:"1"},{label:"",value:"0"}],extraBooleanList:[{label:"是",value:"1"},{label:"否",value:"0"},{label:"(null)",value:null}],bussinessList:[{label:"语音业务",value:"语音业务"},{label:"互联网业务",value:"互联网业务"},{label:"专线业务",value:"专线业务"}],majorList:[{label:"传输",value:"传输"},{label:"数据",value:"数据"},{label:"交换",value:"交换"},{label:"政企云",value:"政企云"},{label:"其他",value:"其他"}],troubleClassList:[{label:"光缆故障",value:"光缆故障"},{label:"设备故障",value:"设备故障"},{label:"动力配套",value:"动力配套"},{label:"电缆故障",value:"电缆故障"},{label:"(null)",value:null}],timeLimitList:[{label:"120",value:"120"},{label:"240",value:"240"},{label:"480",value:"480"}],before_edit:""}},created:function(){this.init()},updated:function(){},methods:{init:function(){1==this.$route.query.edit&&(this.edit=!0);var t=new Date,e=new Date;e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),this.getData(e.Format("yyyy-MM-dd hh:mm:ss"),t.Format("yyyy-MM-dd hh:mm:ss"))},refresh:function(){var t=this.$refs.xTable;t.updateData()},editMethod:function(t){t.column,t.columnIndex;return!!this.edit},beforeEdit:function(t){var e=t.row,a=t.column;this.before_edit=e[a.property]},sendEdit:function(t){var e=t.row,a=t.column,s=e[a.property];if(this.before_edit!=s){var r=e.orderId,i=a.property,n=new FormData;n.append("id",r),n.append("title",i),n.append("value",s),n.append("token","dGVtcDgzMDgwOTMzMjQ0NDg="),this.axios.post("http://"+X+"scripts/assess_order/update_single.php",n).then((function(t){"success"==t.data.status||(alert(t.data.errMsg),console.log(t))})).catch((function(t){alert(t)}))}},getData:function(t,e){var a=this;a.dataReady=!1;var s=new FormData;s.append("START",t),s.append("END",e),s.append("token","dGVtcDgzMDgwOTMzMjQ0NDg="),s.append("province","广东省广州市"),this.axios.post("http://"+X+"scripts/assess_order/get_gz_order_by_datetime.php",s).then((function(t){if("success"==t.data.status){for(var e in a.rawData=t.data.result,a.rawData){var s=a.rawData[e];"广州"==s.responsible_province&&(1==s.is_assess||1==a.edit&&null==s.is_trouble)&&a.assessData.push(s)}console.log(a.assessData),a.dataReady=!0}else alert(t.data.errMsg)})).catch((function(t){alert(t)}))},cellClassName:function(t){var e=t.row,a=(t.rowIndex,t.column),s=(t.columnIndex,"");switch(a.property){case"orderId":"1"==e.time_out&&(e.remark.indexOf("[澄清历时]")>=0?s+="cell_pass ":e.remark.indexOf("[澄清责任]")>=0?s+="cell_not_responsible ":e.remark.indexOf("[澄清有争议]")>=0?s+="cell_argue ":s+="cell_timeout "),null==e.is_trouble&&(s+="cell_unformed ");case"name":case"circuit_number":s+="canSelect ";break}return s},filterMethod:function(t){var e=t.row,a=t.column,s=t.option;return null!=e[a.property].match(s.data)},filterMethodStrict:function(t){var e=t.row,a=t.column,s=t.option;return e[a.property]==s.value},toBoolean:function(t){var e=t.cellValue;return"1"==e?"是":""},hideMark:function(t){var e=t.cellValue;return e.replace(/\[.*\]/,"")},toBack:function(){this.$router.push({name:"index",params:{}})}}},tt=Z,et=(a("482b"),Object(u["a"])(tt,J,W,!1,null,null,null)),at=et.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{attrs:{id:"title"}},[t._v("周报/月报自动生成工具")]),a("div",{staticClass:"input_box"},[t._l(t.inputSettings,(function(e,s){return a("div",{key:s,staticClass:"data_item"},[a("div",{staticClass:"data_title"},[t._v(t._s(e.text)+":")]),"text"==e.type?a("el-input",{staticClass:"data_value",attrs:{placeholder:"请输入数据"},on:{input:function(e){return t.change(e)}},model:{value:e.data,callback:function(a){t.$set(e,"data",a)},expression:"item.data"}}):t._e(),"select"==e.type?a("el-select",{staticClass:"data_value",attrs:{placeholder:"请选择"},model:{value:e.data,callback:function(a){t.$set(e,"data",a)},expression:"item.data"}},t._l(e.selectOption,(function(t){return a("el-option",{key:t.name,attrs:{label:t.text,value:t.name}})})),1):t._e(),"datetime"==e.type?a("el-date-picker",{staticClass:"data_value",attrs:{type:"datetime",placeholder:"选择日期时间",editable:!1},model:{value:e.data,callback:function(a){t.$set(e,"data",a)},expression:"item.data"}}):t._e()],1)})),a("el-button",{attrs:{id:"btn_submit",type:"primary",loading:t.loading,disabled:t.loading},on:{click:t.onSubmit}},[t._v(t._s(t.submit_text))])],2),t.img_list.length>0?a("div",{staticClass:"input_box"},t._l(t.img_list,(function(e,s){return a("div",{key:s,staticClass:"img"},[a("div",{staticClass:"img_zone",attrs:{id:e.name}}),a("div",{staticClass:"img_title"},[t._v("图"+t._s(s+1)+" "+t._s(e.text))])])})),0):t._e(),t.result.length>0?a("div",{staticClass:"input_box"},[t._l(t.result,(function(e,s){return"text"!=e.type&&"img"!=e.type||""==e.value?t._e():a("div",{key:s,staticClass:"data_item"},[a("div",{staticClass:"result_title"},[t._v(t._s(e.text)+":")]),a("el-input",{staticClass:"result_value",attrs:{type:"textarea",autosize:"",readonly:""},model:{value:"text"==e.type?e.value:e.value.path,callback:function(a){t.$set((e.type,e.value),"path",a)},expression:"item.type=='text'?item.value:item.value.path"}})],1)})),a("el-button",{attrs:{id:"btn_create",type:"primary",loading:t.create_loading,disabled:t.create_loading},on:{click:t.onConfirm}},[t._v(t._s(t.confirm_text))])],2):t._e()])},rt=[],it=(a("a434"),a("b0c0"),a("d3b7"),a("ddb0"),a("96cf"),a("1da1")),nt=a("d4ec"),ot=a("bee2"),ut=a("313e"),mt=["#5B9BE7","#ED7D31","#A5A5A5","#FFC000","#4472C4","#70AD47","#255E91","#9E480E","#636363","#997300","#264478","#43682B","#7CAFDD"],dt="10.117.195.193/gensmo/",lt=3731;Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t};var ct=function(){function t(e,a,s,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;Object(nt["a"])(this,t),this.name=e,this.type=a,this.text=s,this.calculator=r,this.callback=i}return Object(ot["a"])(t,[{key:"cal",value:function(t){var e=this.calculator(t);return void 0!=this.callback&&this.callback(e),e}}]),t}(),_t=["市政施工","河涌整治","三线整治","恶意剪线","车辆挂断","老鼠咬断","自然灾害","光缆劣化","尾纤松动","客户内线"],ht=["传输设备","数据设备","交换设备","接入设备","客户端联通设备","客户设备"],pt=["机房停电","机房电池","机房空调","基站停电","基站电池","基站空调","室分停电","室分电池","室分空调","客户动力"],ft=["市政施工","河涌整治","三线整治","恶意剪线","车辆挂断","老鼠咬断","自然灾害","电缆劣化","电缆松动","客户内线"],vt=function(){function t(){Object(nt["a"])(this,t)}return Object(ot["a"])(t,[{key:"add",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(void 0==a)switch(e){case"number":a=0;break;case"string":case"input":a="";break;case"array":a=[];break;case"object":a={};break;default:a="";break}this[t]={data:a,type:e}}}]),t}(),bt={name:"Daily",components:{},data:function(){return{rawData:[],assess_data:[],assess_data_all:[],rawLocalData:[],local_data:[],local_data_all:[],number_list:[],img_list:[],chart_list:[],url_OK:0,dataReady:!1,dataLocalReady:!1,submit_text:"开始计算",loading:!1,confirm_text:"确认",create_loading:!1,itemList:[],result:[],dataObject:new vt,inputSettings:[{name:"start",text:"起始时间*",type:"datetime",data:"",dataType:"string"},{name:"end",text:"终止时间*",type:"datetime",data:"",dataType:"string"},{name:"type",text:"生成类型*",type:"select",data:"",dataType:"string",selectOption:[{name:"week",text:"周报"},{name:"month",text:"月报"}]},{name:"last3_text",text:"上三期时间",type:"text",data:"",dataType:"string"},{name:"assess_data_last3",text:"上三期19工单数",type:"text",data:"",dataType:"number"},{name:"local_data_last3",text:"上三期本地工单数",type:"text",data:"",dataType:"number"},{name:"last2_text",text:"上两期时间",type:"text",data:"",dataType:"string"},{name:"assess_data_last2",text:"上两期19工单数",type:"text",data:"",dataType:"number"},{name:"local_data_last2",text:"上两期本地工单数",type:"text",data:"",dataType:"number"},{name:"last_text",text:"上期时间",type:"text",data:"",dataType:"string"},{name:"assess_data_last",text:"上期19工单数",type:"text",data:"",dataType:"number"},{name:"local_data_last",text:"上期本地工单数",type:"text",data:"",dataType:"number"}]}},created:function(){this.init()},updated:function(){},methods:{init:function(){this.getDefault(),this.loadSettings()},getDefault:function(){var t=this;this.axios.get("http://"+dt+"scripts/assess_order/reportData.php").then((function(e){for(var a in e.data)for(var s in t.dataObject.add(e.data[a].name,e.data[a].dataType,e.data[a].data),t.inputSettings)if(t.inputSettings[s].name==e.data[a].name){t.inputSettings[s].data=e.data[a].data;break}}))},onSubmit:function(){var t=this.inputSettings;for(var e in t){var a=t[e];this.dataObject.add(a.name,a.dataType,a.data)}if(""!=this.dataObject.start.data){var s=new Date(this.dataObject.start.data);if(""!=this.dataObject.end.data){var r=new Date(this.dataObject.end.data),i=new Date(s);i.setDate(1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),this.dataObject.add("year","number",s.getFullYear()),this.itemList.push(new ct("year","text","年份",(function(t){return s.getFullYear()}))),this.dataObject.add("month","number",s.getMonth()+1),this.itemList.push(new ct("month","text","月",(function(t){return s.getMonth()+1}))),this.itemList.push(new ct("date_start","text","起始日期",(function(t){return s.Format("MM月dd日")}))),this.itemList.push(new ct("date_end","text","终止日期",(function(t){return r.Format("MM月dd日")}))),this.getData(s,r,i),this.submit_text="计算中...",this.loading=!0}else alert("请输入终止时间！")}else alert("请输入起始时间！")},getData:function(t,e,a){var s=this;s.dataReady=!1;var r=new FormData;r.append("START",a.Format("yyyy-MM-dd hh:mm:ss")),r.append("END",e.Format("yyyy-MM-dd hh:mm:ss")),r.append("token","dGVtcDgzMDgwOTMzMjQ0NDg="),r.append("province","广东省广州市"),this.axios.post("http://"+dt+"scripts/assess_order/get_gz_order_by_datetime.php",r).then((function(e){if("success"==e.data.status){for(var a in s.rawData=e.data.result,s.assess_data_all=[],s.assess_data=[],s.rawData){var r=s.rawData[a];"广州"!=r.responsible_province&&"用户"!=r.responsible_province||(s.assess_data_all.push(r),new Date(r.end_time)>t&&s.assess_data.push(r))}s.dataReady=!0,s.dataReady&&s.dataLocalReady&&s.dataNumberReady&&(s.loadData(),s.calculate())}else alert(e.data.errMsg)})).catch((function(t){alert(t),console.log(t)}));var i=new FormData;i.append("end_time_start",a.Format("yyyy-MM-dd hh:mm:ss")),i.append("end_time_end",e.Format("yyyy-MM-dd hh:mm:ss")),i.append("step",""),this.axios.post("http://"+dt+"scripts/get_list_with_mark.php",i).then((function(e){if("success"==e.data.status){for(var a in s.rawLocalData=e.data.result,s.local_data=[],s.rawLocalData)new Date(s.rawLocalData[a].end_time)>t&&s.local_data.push(s.rawLocalData[a]);s.dataLocalReady=!0,s.dataReady&&s.dataLocalReady&&s.dataNumberReady&&(s.loadData(),s.calculate())}else alert(e.data.errMsg)})).catch((function(t){alert(t)}));var n=new FormData;n.append("mark",""),this.axios.post("http://"+dt+"scripts/assess_order/circuit_number_sum.php",n).then((function(t){"success"==t.data.status?(s.number_list=t.data.result,s.dataNumberReady=!0,s.dataReady&&s.dataLocalReady&&s.dataNumberReady&&(s.loadData(),s.calculate())):alert(t.data.errMsg)})).catch((function(t){alert(t),console.log(t)}))},getNumberRate:function(t,e){for(var a in this.number_list)if(t==this.number_list[a].name)return(e/this.number_list[a].sum*100).toFixed(2);return"10.00"},calculate:function(){var t=this;this.img_list=[];var e=[],a=this,s=function(s){if("img"==t.itemList[s].type){var r=t.itemList[s].cal(t.dataObject);r.then((function(t){var e={name:a.itemList[s].name,text:a.itemList[s].text,type:a.itemList[s].type};""==t?(e.value="",e.type="text",a.result.push(e)):a.chart_list.push({json:e,chart:t})}))}else if("text"==t.itemList[s].type){var i={name:t.itemList[s].name,text:t.itemList[s].text,type:t.itemList[s].type,value:t.itemList[s].cal(t.dataObject)+""};e.push(i)}else if("array"==t.itemList[s].type){t.itemList[s].cal(t.dataObject);var n={name:t.itemList[s].name,text:t.itemList[s].text,type:t.itemList[s].type,value:t.itemList[s].cal(t.dataObject)};e.push(n)}};for(var r in this.itemList)s(r);this.result=e,this.submit_text="重新计算",this.loading=!1},savePic:function(){var t=Object(it["a"])(regeneratorRuntime.mark((function t(e){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="",s=new FormData,s.append("baseimg",e),t.next=5,this.axios.post("http://"+dt+"scripts/assess_order/savePic.php?action=save",s).then((function(t){a=t.data}));case 5:return t.abrupt("return",a);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),onConfirm:function(){var t=this,e=this;this.confirm_text="生成中...",this.create_loading=!0,this.url_OK=0;var a=function(a){var s=t.chart_list[a].chart,r=s.getDom().firstChild.firstChild.getContext("2d");r.strokeStyle="#636363",r.strokeRect(0,0,s.getWidth(),s.getHeight()),t.savePic(s.getDataURL()).then((function(t){var s=e.chart_list[a].json,r={path:t,width:"147mm",height:"87mm",ratio:!1};s.value=r,e.result.push(s),e.url_OK++,e.url_OK==e.chart_list.length&&e.sendJSON()}))};for(var s in this.chart_list)a(s)},sendJSON:function(){var t=this,e=new FormData,a=JSON.stringify(this.result);a=a.replace(/&/gm,"&amp;"),a=a.replace(/</gm,"&lt;"),a=a.replace(/>/gm,"&gt;"),e.append("DATA",a),e.append("type",this.dataObject.type.data),this.axios.post("http://"+dt+"scripts/assess_order/read_word.php",e).then((function(e){t.create_loading=!1,t.confirm_text="确认";for(var a=0;a<t.url_OK;a++)t.result.pop();"success"==e.data.status?window.open("http://"+dt+"files/"+e.data.name):alert(e.data.errMsg)})).catch((function(e){t.create_loading=!1,t.confirm_text="确认";for(var a=0;a<t.url_OK;a++)t.result.pop();alert(e)}))},change:function(t){this.$forceUpdate()},loadData:function(){this.dataObject.add("assess_data","array",this.assess_data),this.dataObject.add("local_data","array",this.local_data),this.dataObject.add("assess_data_all","array",this.assess_data_all),this.dataObject.add("local_data_all","array",this.rawLocalData)},getImg:function(t,e){var a=ut.init(document.getElementById(t));return a.setOption(e),window.addEventListener("resize",(function(){a.resize()})),a},getOption:function(t,e){var a,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];switch(t){case"pie":e.label={show:!0,position:"inside",formatter:"{b}，{c}，{d}%"},e.type="pie",a={title:{show:!1},grid:{x:10,y:25,x2:10,y2:25},animation:!1,tooltip:{},series:[e],color:mt};break;case"bar":a={title:{show:!1},grid:{x:10,y:25,x2:10,y2:25},animation:!1,tooltip:{},legend:r,xAxis:{data:s,splitLine:{show:!1},axisLabel:{interval:0,fontSize:10,formatter:function(t){var e="";return e=t.length>10?t.substring(0,10)+"...":t,e}}},yAxis:{show:!1,splitLine:{show:!1}},series:e,color:mt};break}return a},loadSettings:function(){var t=this;this.dataObject.add("assess_data_last","input"),this.dataObject.add("local_data_last","input"),this.dataObject.add("start","input"),this.dataObject.add("end","input"),this.itemList.push(new ct("order_sum","text","故障总量",(function(t){return t.assess_data.data.length+t.local_data.data.length}),(function(e){t.dataObject.add("order_sum","number",e)}))),this.itemList.push(new ct("order_assess_sum","text","19故障总量",(function(t){return t.assess_data.data.length}))),this.itemList.push(new ct("order_assess_percent","text","19工单占比",(function(t){return(t.assess_data.data.length/t.order_sum.data*100).toFixed(2)}))),this.itemList.push(new ct("order_assess_compare","text","19工单环比",(function(t){var e=t.assess_data.data.length-Number(t.assess_data_last.data);return e>0?"增加"+e:e<0?"减少"+e:"持平"}))),this.itemList.push(new ct("order_local_sum","text","本地故障总量",(function(t){return t.local_data.data.length}))),this.itemList.push(new ct("order_local_percent","text","本地工单占比",(function(t){return(t.local_data.data.length/t.order_sum.data*100).toFixed(2)}))),this.itemList.push(new ct("order_local_compare","text","本地工单环比",(function(t){var e=t.local_data.data.length-Number(t.local_data_last.data);return e>0?"增加"+e:e<0?"减少"+e:"持平"}))),this.itemList.push(new ct("sum_picture","img","近4期政企用户故障量情况",function(){var e=Object(it["a"])(regeneratorRuntime.mark((function e(a){var s,r,i,n,o,u,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.img_list.push({name:this.name,text:this.text}),s=this.name,"",r="",e.t0=a.type.data,e.next="month"===e.t0?7:(e.t0,9);break;case 7:return i=a.month.data+"月",e.abrupt("break",10);case 9:i=a.start.data.Format("MM月dd日")+"-"+a.end.data.Format("dd日");case 10:return n=[a.last3_text.data,a.last2_text.data,a.last_text.data,i],o={show:!0,top:20},u=[{name:"19系统",type:"bar",stack:"故障量",data:[a.assess_data_last3.data,a.assess_data_last2.data,a.assess_data_last.data,a.assess_data.data.length],label:{show:!0},barMaxWidth:60},{name:"本地",type:"bar",stack:"故障量",data:[a.local_data_last3.data,a.local_data_last2.data,a.local_data_last.data,a.local_data.data.length],label:{show:!0}}],m=t.getOption("bar",u,n,o),e.next=16,t.$nextTick((function(){r=t.getImg(s,m)}));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}())),this.itemList.push(new ct("order_real","text","真实工单",(function(t){var e=t.assess_data.data,a=t.local_data.data,s=0;for(var r in e)"1"==e[r].is_trouble&&s++;for(var i in a)"1"==a[i].is_trouble&&s++;return s}),(function(e){t.dataObject.add("order_real","number",e)}))),this.itemList.push(new ct("order_real_percent","text","真实工单比例",(function(t){return(t.order_real.data/t.order_sum.data*100).toFixed(2)}))),this.itemList.push(new ct("order_fake","text","非真实工单",(function(t){var e=t.assess_data.data,a=t.local_data.data,s=0;for(var r in e)"0"==e[r].is_trouble&&s++;for(var i in a)"0"==a[i].is_trouble&&s++;return s}),(function(e){t.dataObject.add("order_fake","number",e)}))),this.itemList.push(new ct("order_fake_percent","text","非真实工单比例",(function(t){return(t.order_fake.data/t.order_sum.data*100).toFixed(2)}))),this.itemList.push(new ct("order_assess_real","text","19真实工单",(function(t){var e=t.assess_data.data,a=0;for(var s in e)"1"==e[s].is_trouble&&a++;return a}),(function(e){t.dataObject.add("order_assess_real","number",e)}))),this.itemList.push(new ct("order_assess_real_percent","text","19真实工单比例",(function(t){return(t.order_assess_real.data/t.assess_data.data.length*100).toFixed(2)}))),this.itemList.push(new ct("order_assess_fake","text","19非真实工单",(function(t){var e=t.assess_data.data,a=0;for(var s in e)"0"==e[s].is_trouble&&a++;return a}),(function(e){t.dataObject.add("order_assess_fake","number",e)}))),this.itemList.push(new ct("order_assess_fake_percent","text","19非真实工单比例",(function(t){return(t.order_assess_fake.data/t.assess_data.data.length*100).toFixed(2)}))),this.itemList.push(new ct("order_assess_duty_sum","text","19责任故障总量",(function(e){var a=e.assess_data.data,s=[];for(var r in a)"广州"==a[r].responsible_province&&"1"==a[r].is_assess&&s.push(a[r]);return t.dataObject.add("order_assess_duty","array",s),s.length}),(function(e){t.dataObject.add("order_assess_duty_sum","number",e)}))),this.itemList.push(new ct("order_assess_duty_compare_month","text","19责任故障环比",(function(t){var e=t.assess_duty_list.data[t.month.data-2],a=t.order_assess_duty.data.length-e;return a>0?"增加"+(a/e*100).toFixed(2)+"%":a<0?"减少"+(-a/e*100).toFixed(2)+"%":"持平"}))),this.itemList.push(new ct("order_assess_duty_compare_year","text","19责任故障同比",(function(t){var e=t.assess_duty_list_last.data[t.month.data-1],a=t.order_assess_duty.data.length-e;return a>0?"增加"+(a/e*100).toFixed(2)+"%":a<0?"减少"+(-a/e*100).toFixed(2)+"%":"持平"}))),this.itemList.push(new ct("order_assess_duty_last_year","text","去年责任累计故障量",(function(t){for(var e=t.assess_duty_list_last.data,a=0,s=0;s<t.month.data;s++)a+=e[s];return a}),(function(e){t.dataObject.add("order_assess_duty_last_year","number",e)}))),this.itemList.push(new ct("order_assess_duty_this_year","text","今年责任累计故障量",(function(t){for(var e=t.assess_duty_list.data,a=0,s=0;s<t.month.data-1;s++)a+=e[s];return a+=t.order_assess_duty_sum.data,a}),(function(e){t.dataObject.add("order_assess_duty_this_year","number",e)}))),this.itemList.push(new ct("order_assess_duty_sum_compare","text","责任故障量同比",(function(t){var e=t.order_assess_duty_last_year.data,a=t.order_assess_duty_this_year.data-e;return a>0?"增加"+(a/e*100).toFixed(2)+"%":a<0?"减少"+(-a/e*100).toFixed(2)+"%":"持平"}))),this.itemList.push(new ct("order_assess_line","text","19专线业务故障",(function(t){var e=t.assess_data.data,a=0;for(var s in e)"专线业务"==e[s].trouble_type&&a++;return a}),(function(e){t.dataObject.add("order_assess_line","number",e)}))),this.itemList.push(new ct("order_assess_network","text","19互联网业务故障",(function(t){var e=t.assess_data.data,a=0;for(var s in e)"互联网业务"==e[s].trouble_type&&a++;return a}),(function(e){t.dataObject.add("order_assess_network","number",e)}))),this.itemList.push(new ct("order_assess_phone","text","19语音业务故障",(function(t){var e=t.assess_data.data,a=0;for(var s in e)"语音业务"==e[s].trouble_type&&a++;return a}),(function(e){t.dataObject.add("order_assess_phone","number",e)}))),this.itemList.push(new ct("order_assess_other","text","19其他业务故障",(function(t){var e=t.assess_data.data;return e.length-t.order_assess_line.data-t.order_assess_network.data-t.order_assess_phone.data}),(function(e){t.dataObject.add("order_assess_other","number",e)}))),this.itemList.push(new ct("order_assess_trouble_type","text","19业务故障情况",(function(t){var e=[];e.push({name:"line",sum:t.order_assess_line.data,text:"专线业务"}),e.push({name:"network",sum:t.order_assess_network.data,text:"互联网业务"}),e.push({name:"phone",sum:t.order_assess_phone.data,text:"语音业务"}),e.push({name:"other",sum:t.order_assess_other.data,text:"其他业务"}),e.sort((function(t,e){return e.sum-t.sum}));var a="";for(var s in e)e[s].sum>0&&(a=a+e[s].text+"故障"+e[s].sum+"宗，占比"+(e[s].sum/t.assess_data.data.length*100).toFixed(2)+"%；");return a=a.substr(0,a.length-1)+"。",a}))),this.itemList.push(new ct("order_assess_sum_picture","img","故障业务分类（19系统）",function(){var e=Object(it["a"])(regeneratorRuntime.mark((function e(a){var s,r,i,n,o,u,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.img_list.push({name:this.name,text:this.text}),s=this.name,"",r="",i=[],n=[{name:"专线业务",value:t.dataObject.order_assess_line.data},{name:"互联网业务",value:t.dataObject.order_assess_network.data},{name:"语音业务",value:t.dataObject.order_assess_phone.data},{name:"其他业务",value:t.dataObject.order_assess_other.data}],n.sort((function(t,e){return e.value-t.value})),e.t0=regeneratorRuntime.keys(n);case 8:if((e.t1=e.t0()).done){e.next=17;break}if(o=e.t1.value,!(n[o].value>0)){e.next=14;break}i.push(n[o]),e.next=15;break;case 14:return e.abrupt("break",17);case 15:e.next=8;break;case 17:return u={name:"故障量",data:i},m=t.getOption("pie",u),e.next=21,t.$nextTick((function(){r=t.getImg(s,m)}));case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}())),this.itemList.push(new ct("order_assess_customer_devices","text","19客户设备",(function(t){var e=t.assess_data.data,a=0;for(var s in e)"客户设备"==e[s].trouble_class&&a++;return a}),(function(e){t.dataObject.add("order_assess_customer_devices","number",e)}))),this.itemList.push(new ct("order_assess_customer_line","text","19客户线路",(function(t){var e=t.assess_data.data,a=0;for(var s in e)"客户线路"==e[s].trouble_class&&a++;return a}),(function(e){t.dataObject.add("order_assess_customer_line","number",e)}))),this.itemList.push(new ct("order_assess_customer_power","text","19客户动力",(function(t){var e=t.assess_data.data,a=0;for(var s in e)"客户动力"==e[s].trouble_class&&a++;return a}),(function(e){t.dataObject.add("order_assess_customer_power","number",e)}))),this.itemList.push(new ct("order_assess_customer","text","19客户侧故障量",(function(t){return t.order_assess_customer_line.data+t.order_assess_customer_power.data+t.order_assess_customer_devices.data}),(function(e){t.dataObject.add("order_assess_customer","number",e)}))),this.itemList.push(new ct("order_assess_customer_devices_percent","text","19客户设备占比",(function(t){return(t.order_assess_customer_devices.data/t.order_assess_customer.data*100).toFixed(2)}),(function(e){t.dataObject.add("order_assess_customer_devices_percent","number",e)}))),this.itemList.push(new ct("order_assess_customer_line_percent","text","19客户线路占比",(function(t){return(t.order_assess_customer_line.data/t.order_assess_customer.data*100).toFixed(2)}),(function(e){t.dataObject.add("order_assess_customer_line_percent","number",e)}))),this.itemList.push(new ct("order_assess_customer_power_percent","text","19客户动力占比",(function(t){return(t.order_assess_customer_power.data/t.order_assess_customer.data*100).toFixed(2)}),(function(e){t.dataObject.add("order_assess_customer_power_percent","number",e)}))),this.itemList.push(new ct("assessCustomerItems","array","19客户侧情况表格",(function(t){var e={assessCustomerItems:"客户线路",assessCustomerItemsSum:t.order_assess_customer_line.data,assessCustomerItemsPercent:t.order_assess_customer_line_percent.data},a={assessCustomerItems:"客户设备",assessCustomerItemsSum:t.order_assess_customer_devices.data,assessCustomerItemsPercent:t.order_assess_customer_devices_percent.data},s={assessCustomerItems:"客户动力",assessCustomerItemsSum:t.order_assess_customer_power.data,assessCustomerItemsPercent:t.order_assess_customer_power_percent.data},r=[a,s,e];return r.sort((function(t,e){return e.assessCustomerItemsSum-t.assessCustomerItemsSum})),r}))),this.itemList.push(new ct("order_assess_customer_detail","text","19客户侧情况",(function(t){var e=[];e.push({name:"line",sum:t.order_assess_customer_line.data,text:"客户线路"}),e.push({name:"devices",sum:t.order_assess_customer_devices.data,text:"客户设备"}),e.push({name:"power",sum:t.order_assess_customer_power.data,text:"客户动力"}),e.sort((function(t,e){return e.sum-t.sum}));var a="";for(var s in e)e[s].sum>0&&(a=a+e[s].text+e[s].sum+"宗，占比"+(e[s].sum/t.order_assess_customer.data*100).toFixed(2)+"%；");return a=a.substr(0,a.length-1)+"。",a}))),this.itemList.push(new ct("order_assess_customer_picture","img","政企客户故障原因（用户侧）",function(){var e=Object(it["a"])(regeneratorRuntime.mark((function e(a){var s,r,i,n,o,u,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.img_list.push({name:this.name,text:this.text}),s=this.name,"",r="",i=[],n=[{name:"客户设备",value:t.dataObject.order_assess_customer_devices.data},{name:"客户线路",value:t.dataObject.order_assess_customer_line.data},{name:"客户动力",value:t.dataObject.order_assess_customer_power.data}],n.sort((function(t,e){return e.value-t.value})),e.t0=regeneratorRuntime.keys(n);case 8:if((e.t1=e.t0()).done){e.next=17;break}if(o=e.t1.value,!(n[o].value>0)){e.next=14;break}i.push(n[o]),e.next=15;break;case 14:return e.abrupt("break",17);case 15:e.next=8;break;case 17:return u={name:"故障量",data:i},m=t.getOption("pie",u),e.next=21,t.$nextTick((function(){r=t.getImg(s,m)}));case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}())),this.itemList.push(new ct("order_assess_unicom_line","text","19光缆故障数量",(function(t){var e=t.assess_data.data,a=0;for(var s in e)"光缆故障"==e[s].trouble_class&&a++;return a}),(function(e){t.dataObject.add("order_assess_unicom_line","number",e)}))),this.itemList.push(new ct("order_assess_unicom_devices","text","19设备故障数量",(function(t){var e=t.assess_data.data,a=0;for(var s in e)"设备故障"==e[s].trouble_class&&a++;return a}),(function(e){t.dataObject.add("order_assess_unicom_devices","number",e)}))),this.itemList.push(new ct("order_assess_unicom_power","text","19动力配套数量",(function(t){var e=t.assess_data.data,a=0;for(var s in e)"动力配套"==e[s].trouble_class&&a++;return a}),(function(e){t.dataObject.add("order_assess_unicom_power","number",e)}))),this.itemList.push(new ct("order_assess_unicom_e_line","text","19电缆故障数量",(function(t){var e=t.assess_data.data,a=0;for(var s in e)"电缆故障"==e[s].trouble_class&&a++;return a}),(function(e){t.dataObject.add("order_assess_unicom_e_line","number",e)}))),this.itemList.push(new ct("order_assess_unicom","text","19网络侧故障量",(function(t){var e=t.order_assess_unicom_line.data+t.order_assess_unicom_power.data+t.order_assess_unicom_devices.data+t.order_assess_unicom_e_line.data;return e}),(function(e){t.dataObject.add("order_assess_unicom","number",e)}))),this.itemList.push(new ct("order_assess_unicom_line_percent","text","19光缆故障占比",(function(t){return(t.order_assess_unicom_line.data/t.order_assess_unicom.data*100).toFixed(2)}),(function(e){t.dataObject.add("order_assess_unicom_line_percent","number",e)}))),this.itemList.push(new ct("order_assess_unicom_devices_percent","text","19设备故障占比",(function(t){return(t.order_assess_unicom_devices.data/t.order_assess_unicom.data*100).toFixed(2)}),(function(e){t.dataObject.add("order_assess_unicom_devices_percent","number",e)}))),this.itemList.push(new ct("order_assess_unicom_power_percent","text","19动力配套占比",(function(t){return(t.order_assess_unicom_power.data/t.order_assess_unicom.data*100).toFixed(2)}),(function(e){t.dataObject.add("order_assess_unicom_power_percent","number",e)}))),this.itemList.push(new ct("order_assess_unicom_e_line_percent","text","19电缆故障占比",(function(t){return(t.order_assess_unicom_e_line.data/t.order_assess_unicom.data*100).toFixed(2)}),(function(e){t.dataObject.add("order_assess_unicom_e_line_percent","number",e)}))),this.itemList.push(new ct("assessUnicomItems","array","19网络侧情况表格",(function(t){var e={assessUnicomItems:"光缆故障",assessUnicomItemsSum:t.order_assess_unicom_line.data,assessUnicomItemsPercent:t.order_assess_unicom_line_percent.data},a={assessUnicomItems:"设备故障",assessUnicomItemsSum:t.order_assess_unicom_devices.data,assessUnicomItemsPercent:t.order_assess_unicom_devices_percent.data},s={assessUnicomItems:"动力配套",assessUnicomItemsSum:t.order_assess_unicom_power.data,assessUnicomItemsPercent:t.order_assess_unicom_power_percent.data},r={assessUnicomItems:"电缆故障",assessUnicomItemsSum:t.order_assess_unicom_e_line.data,assessUnicomItemsPercent:t.order_assess_unicom_e_line_percent.data},i=[a,s,e,r];return i.sort((function(t,e){return e.assessUnicomItemsSum-t.assessUnicomItemsSum})),i}))),this.itemList.push(new ct("order_assess_unicom_detail","text","19网络侧情况",(function(t){var e=[];e.push({name:"line",sum:t.order_assess_unicom_line.data,text:"光缆故障"}),e.push({name:"devices",sum:t.order_assess_unicom_devices.data,text:"设备故障"}),e.push({name:"power",sum:t.order_assess_unicom_power.data,text:"动力配套"}),e.push({name:"e_line",sum:t.order_assess_unicom_e_line.data,text:"电缆故障"}),e.sort((function(t,e){return e.sum-t.sum}));var a="";for(var s in e)e[s].sum>0&&(a=a+e[s].text+e[s].sum+"宗，占比"+(e[s].sum/t.order_assess_customer.data*100).toFixed(2)+"%；");return a}))),this.itemList.push(new ct("order_assess_unicom_picture","img","故障原因分类（网络侧）",function(){var e=Object(it["a"])(regeneratorRuntime.mark((function e(a){var s,r,i,n,o,u,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.img_list.push({name:this.name,text:this.text}),s=this.name,"",r="",i=[],n=[{name:"光缆故障",value:t.dataObject.order_assess_unicom_line.data},{name:"设备故障",value:t.dataObject.order_assess_unicom_devices.data},{name:"动力配套",value:t.dataObject.order_assess_unicom_power.data},{name:"电缆故障",value:t.dataObject.order_assess_unicom_e_line.data}],n.sort((function(t,e){return e.value-t.value})),e.t0=regeneratorRuntime.keys(n);case 8:if((e.t1=e.t0()).done){e.next=17;break}if(o=e.t1.value,!(n[o].value>0)){e.next=14;break}i.push(n[o]),e.next=15;break;case 14:return e.abrupt("break",17);case 15:e.next=8;break;case 17:return u={name:"故障量",data:i},m=t.getOption("pie",u),e.next=21,t.$nextTick((function(){r=t.getImg(s,m)}));case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}())),this.itemList.push(new ct("order_assess_unicom_line_detail","text","19光缆故障详情",(function(e){var a=e.assess_data.data,s=[];for(var r in _t)s.push({name:_t[r],sum:0});for(var i in a)if("光缆故障"==a[i].trouble_class)for(var n in s)if(a[i].trouble_reason==s[n].name){s[n].sum++;break}s.sort((function(t,e){return e.sum-t.sum}));for(var o=0;o<s.length;o++)0==s[o].sum&&s.splice(o);t.dataObject.add("order_assess_unicom_line_list","array",s);for(var u=e.order_assess_unicom_line.data,m="",d=!0,l=0,c=-1,_=0;_<s.length&&d;_++)if(_<s.length-1&&s[_].sum==s[_+1].sum)c<0&&(c=_);else{if(c<0)m=m+s[_].name+s[_].sum+"宗，占比"+(s[_].sum/u*100).toFixed(2)+"%；",l++;else{for(var h=c;h<=_;h++)m=m+s[h].name+"、";m=m.substr(0,m.length-1),m=m+"各"+s[c].sum+"宗，各占比"+(s[c].sum/u*100).toFixed(2)+"%；",l=l+_-c+1,c=-1}l>=3&&(d=!1)}return m}))),this.itemList.push(new ct("order_assess_unicom_devices_detail","text","19设备故障详情",(function(e){var a=e.assess_data.data,s=[];for(var r in ht)s.push({name:ht[r],sum:0});for(var i in a)if("设备故障"==a[i].trouble_class)for(var n in s)if(a[i].trouble_reason==s[n].name){s[n].sum++;break}s.sort((function(t,e){return e.sum-t.sum}));for(var o=0;o<s.length;o++)0==s[o].sum&&s.splice(o);t.dataObject.add("order_assess_unicom_devices_list","array",s);for(var u=e.order_assess_unicom_devices.data,m="",d=!0,l=0,c=-1,_=0;_<s.length&&d;_++)if(_<s.length-1&&s[_].sum==s[_+1].sum)c<0&&(c=_);else{if(c<0)m=m+s[_].name+s[_].sum+"宗，占比"+(s[_].sum/u*100).toFixed(2)+"%；",l++;else{for(var h=c;h<=_;h++)m=m+s[h].name+"、";m=m.substr(0,m.length-1),m=m+"各"+s[c].sum+"宗，各占比"+(s[c].sum/u*100).toFixed(2)+"%；",l=l+_-c+1,c=-1}l>=3&&(d=!1)}return m}))),this.itemList.push(new ct("order_assess_unicom_power_detail","text","19动力配套详情",(function(e){var a=e.assess_data.data,s=[];for(var r in pt)s.push({name:pt[r],sum:0});for(var i in a)if("动力配套"==a[i].trouble_class)for(var n in s)if(a[i].trouble_reason==s[n].name){s[n].sum++;break}s.sort((function(t,e){return e.sum-t.sum}));for(var o=0;o<s.length;o++)0==s[o].sum&&s.splice(o);t.dataObject.add("order_assess_unicom_power_list","array",s);for(var u=e.order_assess_unicom_power.data,m="",d=!0,l=0,c=-1,_=0;_<s.length&&d;_++)if(_<s.length-1&&s[_].sum==s[_+1].sum)c<0&&(c=_);else{if(c<0)m=m+s[_].name+s[_].sum+"宗，占比"+(s[_].sum/u*100).toFixed(2)+"%；",l++;else{for(var h=c;h<=_;h++)m=m+s[h].name+"、";m=m.substr(0,m.length-1),m=m+"各"+s[c].sum+"宗，各占比"+(s[c].sum/u*100).toFixed(2)+"%；",l=l+_-c+1,c=-1}l>=3&&(d=!1)}return m}))),this.itemList.push(new ct("order_assess_unicom_e_line_detail","text","19电缆故障详情",(function(e){var a=e.assess_data.data,s=[];for(var r in ft)s.push({name:ft[r],sum:0});for(var i in a)if("电缆故障"==a[i].trouble_class)for(var n in s)if(a[i].trouble_reason==s[n].name){s[n].sum++;break}s.sort((function(t,e){return e.sum-t.sum}));for(var o=0;o<s.length;o++)0==s[o].sum&&s.splice(o);t.dataObject.add("order_assess_unicom_e_line_list","array",s);for(var u=e.order_assess_unicom_e_line.data,m="",d=!0,l=0,c=-1,_=0;_<s.length&&d;_++)if(_<s.length-1&&s[_].sum==s[_+1].sum)c<0&&(c=_);else{if(c<0)m=m+s[_].name+s[_].sum+"宗，占比"+(s[_].sum/u*100).toFixed(2)+"%；",l++;else{for(var h=c;h<=_;h++)m=m+s[h].name+"、";m=m.substr(0,m.length-1),m=m+"各"+s[c].sum+"宗，各占比"+(s[c].sum/u*100).toFixed(2)+"%；",l=l+_-c+1,c=-1}l>=3&&(d=!1)}return m}))),this.itemList.push(new ct("assessUnicomLineItem1","text","19光缆故障首项",(function(t){var e=t.order_assess_unicom_line_list.data;return e&&e.length>0?e[0].name:""}))),this.itemList.push(new ct("assessUnicomLineItemSum1","text","19光缆故障首项数量",(function(t){var e=t.order_assess_unicom_line_list.data;return e&&e.length>0?e[0].sum:""}))),this.itemList.push(new ct("assessUnicomLineItemPercent1","text","19光缆故障首项占比",(function(t){var e=t.order_assess_unicom_line_list.data;return e&&e.length>0?(e[0].sum/t.order_assess_unicom_line.data*100).toFixed(2):""}))),this.itemList.push(new ct("assessUnicomDevicesItem1","text","19设备故障首项",(function(t){var e=t.order_assess_unicom_devices_list.data;return e&&e.length>0?e[0].name:""}))),this.itemList.push(new ct("assessUnicomDevicesItemSum1","text","19设备故障首项数量",(function(t){var e=t.order_assess_unicom_devices_list.data;return e&&e.length>0?e[0].sum:""}))),this.itemList.push(new ct("assessUnicomDevicesItemPercent1","text","19设备故障首项占比",(function(t){var e=t.order_assess_unicom_devices_list.data;return e&&e.length>0?(e[0].sum/t.order_assess_unicom_devices.data*100).toFixed(2):""}))),this.itemList.push(new ct("assessUnicomPowerItem1","text","19动力配套首项",(function(t){var e=t.order_assess_unicom_power_list.data;return e&&e.length>0?e[0].name:""}))),this.itemList.push(new ct("assessUnicomPowerItemSum1","text","19动力配套首项数量",(function(t){var e=t.order_assess_unicom_power_list.data;return e&&e.length>0?e[0].sum:""}))),this.itemList.push(new ct("assessUnicomPowerItemPercent1","text","19动力配套首项占比",(function(t){var e=t.order_assess_unicom_power_list.data;return e&&e.length>0?(e[0].sum/t.order_assess_unicom_power.data*100).toFixed(2):""}))),this.itemList.push(new ct("assessUnicomELineItem1","text","19电缆故障首项",(function(t){var e=t.order_assess_unicom_e_line_list.data;return e&&e.length>0?e[0].name:""}))),this.itemList.push(new ct("assessUnicomELineItemSum1","text","19电缆故障首项数量",(function(t){var e=t.order_assess_unicom_e_line_list.data;return e&&e.length>0?e[0].sum:""}))),this.itemList.push(new ct("assessUnicomELineItemPercent1","text","19电缆故障首项占比",(function(t){var e=t.order_assess_unicom_e_line_list.data;return e&&e.length>0?(e[0].sum/t.order_assess_unicom_e_line.data*100).toFixed(2):""}))),this.itemList.push(new ct("assessUnicomLineItem","array","19光缆故障表格",(function(t){for(var e=t.order_assess_unicom_line_list.data,a=[],s=1;s<e.length;s++)a.push({assessUnicomLineItem:e[s].name,assessUnicomLineItemSum:e[s].sum,assessUnicomLineItemPercent:(e[s].sum/t.order_assess_unicom_line.data*100).toFixed(2)});return a}))),this.itemList.push(new ct("assessUnicomDevicesItem","array","19设备故障表格",(function(t){for(var e=t.order_assess_unicom_devices_list.data,a=[],s=1;s<e.length;s++)a.push({assessUnicomDevicesItem:e[s].name,assessUnicomDevicesItemSum:e[s].sum,assessUnicomDevicesItemPercent:(e[s].sum/t.order_assess_unicom_devices.data*100).toFixed(2)});return a}))),this.itemList.push(new ct("assessUnicomPowerItem","array","19动力配套表格",(function(t){for(var e=t.order_assess_unicom_power_list.data,a=[],s=1;s<e.length;s++)a.push({assessUnicomPowerItem:e[s].name,assessUnicomPowerItemSum:e[s].sum,assessUnicomPowerItemPercent:(e[s].sum/t.order_assess_unicom_power.data*100).toFixed(2)});return a}))),this.itemList.push(new ct("assessUnicomELineItem","array","19电缆故障表格",(function(t){for(var e=t.order_assess_unicom_e_line_list.data,a=[],s=1;s<e.length;s++)a.push({assessUnicomELineItem:e[s].name,assessUnicomELineItemSum:e[s].sum,assessUnicomELineItemPercent:(e[s].sum/t.order_assess_unicom_e_line.data*100).toFixed(2)});return a}))),this.itemList.push(new ct("order_assess_business_type_detail","text","19客户行业详情",(function(e){var a=e.assess_data.data,s=[];for(var r in a){switch(a[r].trouble_class){case"光缆故障":case"设备故障":case"动力配套":case"电缆故障":break;default:continue}var i=a[r].business_type;"12"==i&&(i="其他行业");var n=!0;for(var o in s)s[o].name==i&&(s[o].sum++,n=!1);n&&s.push({name:i,sum:1})}for(var u in s)"其他行业"==s[u].name&&(s[u].name="中小企业");s.sort((function(t,e){return e.sum-t.sum})),t.dataObject.add("order_assess_business_type_list","array",s);var m="";return m=s.length>1?"占比最大的是"+s[0].name+"，"+s[0].sum+"宗，占比"+(s[0].sum/a.length*100).toFixed(2)+"%；其次是"+s[1].name+"，"+s[1].sum+"宗，占比"+(s[1].sum/e.order_assess_unicom.data*100).toFixed(2)+"%。":"占比最大的是"+s[0].name+"，"+s[0].sum+"宗，占比"+(s[0].sum/a.length*100).toFixed(2)+"%",m}))),this.itemList.push(new ct("assessBusinessTypeItem","array","19客户行业表格",(function(t){var e=t.order_assess_business_type_list.data,a=[];for(var s in e)a.push({assessBusinessTypeItem:e[s].name,assessBusinessTypeItemSum:e[s].sum,assessBusinessTypeItemPercent:(e[s].sum/t.order_assess_unicom.data*100).toFixed(2)});return a}))),this.itemList.push(new ct("order_assess_customer_sum_detail","text","19客户故障量分析",(function(e){var a=e.assess_data.data,s=[];for(var r in a){var i=a[r].name,n="";switch(a[r].trouble_class){case"光缆故障":case"设备故障":case"动力配套":case"电缆故障":n=a[r].trouble_reason;break;default:continue}var o=!0;for(var u in s)s[u].name==i&&(s[u].sum++,void 0==s[u].reason[n]?s[u].reason[n]=1:s[u].reason[n]=s[u].reason[n]+1,o=!1);if(o){var m=[];m[n]=1,s.push({name:i,sum:1,reason:m})}}s.sort((function(t,e){return e.sum-t.sum}));for(var d=0;d<s.length;d++)s[d].sum<=1?s.splice(d):""!=s[d].name&&"-"!=s[d].name&&" "!=s[d].name||s.splice(d);var l=s.length>5?5:s.length;if(s.splice(l),t.dataObject.add("order_assess_customer_list","array",s),0==s.length)return"所有客户均报障1宗";var c="";for(var _ in s){for(var h in s[_].reason)c=c+s[_].reason[h]+"次"+h+"、";c=c.substr(0,c.length-1),c=c+"造成"+s[_].name+"报障"+s[_].sum+"宗，占比"+(s[_].sum/e.order_assess_unicom.data*100).toFixed(2)+"%；"}return c+="其余客户均报障1宗。",c}))),this.itemList.push(new ct("order_assess_customer_sum_picture","img","19客户故障量情况（网络侧）",function(){var e=Object(it["a"])(regeneratorRuntime.mark((function e(a){var s,r,i,n,o,u,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.img_list.push({name:this.name,text:this.text}),s=this.name,"",r="",i=t.dataObject.order_assess_customer_list.data,!(i.length<2)){e.next=8;break}return t.img_list.pop(),e.abrupt("return","");case 8:for(u in n=[],o=[{name:"故障量",type:"bar",data:[],label:{show:!0},barMaxWidth:60}],i)n.push(i[u].name),o[0].data.push(i[u].sum);return m=t.getOption("bar",o,n),e.next=14,t.$nextTick((function(){r=t.getImg(s,m)}));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}())),this.itemList.push(new ct("order_local_real","text","本地真实工单",(function(t){var e=t.local_data.data,a=0;for(var s in e)"1"==e[s].is_trouble&&a++;return a}),(function(e){t.dataObject.add("order_local_real","number",e)}))),this.itemList.push(new ct("order_local_real_percent","text","本地真实工单比例",(function(t){return(t.order_local_real.data/t.local_data.data.length*100).toFixed(2)}))),this.itemList.push(new ct("order_local_fake","text","本地非真实工单",(function(t){var e=t.local_data.data,a=0;for(var s in e)"0"==e[s].is_trouble&&a++;return a}),(function(e){t.dataObject.add("order_local_fake","number",e)}))),this.itemList.push(new ct("order_local_fake_percent","text","本地非真实工单比例",(function(t){return(t.order_local_fake.data/t.local_data.data.length*100).toFixed(2)}))),this.itemList.push(new ct("order_local_unicom_line","text","本地光缆故障数量",(function(t){var e=t.local_data.data,a=0;for(var s in e)"光缆故障"==e[s].trouble_class&&a++;return a}),(function(e){t.dataObject.add("order_local_unicom_line","number",e)}))),this.itemList.push(new ct("order_local_unicom_line_percent","text","本地光缆故障占比",(function(t){return(t.order_local_unicom_line.data/t.order_local_real.data*100).toFixed(2)}),(function(e){t.dataObject.add("order_local_unicom_line_percent","number",e)}))),this.itemList.push(new ct("order_local_unicom_devices","text","本地设备故障数量",(function(t){var e=t.local_data.data,a=0;for(var s in e)"设备故障"==e[s].trouble_class&&a++;return a}),(function(e){t.dataObject.add("order_local_unicom_devices","number",e)}))),this.itemList.push(new ct("order_local_unicom_devices_percent","text","本地设备故障占比",(function(t){return(t.order_local_unicom_devices.data/t.order_local_real.data*100).toFixed(2)}),(function(e){t.dataObject.add("order_local_unicom_devices_percent","number",e)}))),this.itemList.push(new ct("order_local_unicom_power","text","本地动力配套数量",(function(t){var e=t.local_data.data,a=0;for(var s in e)"动力配套"==e[s].trouble_class&&a++;return a}),(function(e){t.dataObject.add("order_local_unicom_power","number",e)}))),this.itemList.push(new ct("order_local_unicom_power_percent","text","本地动力配套占比",(function(t){return(t.order_local_unicom_power.data/t.order_local_real.data*100).toFixed(2)}),(function(e){t.dataObject.add("order_local_unicom_power_percent","number",e)}))),this.itemList.push(new ct("order_local_unicom_e_line","text","本地电缆故障数量",(function(t){var e=t.local_data.data,a=0;for(var s in e)"电缆故障"==e[s].trouble_class&&a++;return a}),(function(e){t.dataObject.add("order_local_unicom_e_line","number",e)}))),this.itemList.push(new ct("order_local_unicom_e_line_percent","text","本地电缆故障占比",(function(t){return(t.order_local_unicom_e_line.data/t.order_local_real.data*100).toFixed(2)}),(function(e){t.dataObject.add("order_local_unicom_e_line_percent","number",e)}))),this.itemList.push(new ct("localUnicomItem","array","本地网络侧情况表格",(function(t){var e={localUnicomItem:"光缆故障",localUnicomItemSum:t.order_local_unicom_line.data,localUnicomItemPercent:t.order_local_unicom_line_percent.data},a={localUnicomItem:"设备故障",localUnicomItemSum:t.order_local_unicom_devices.data,localUnicomItemPercent:t.order_local_unicom_devices_percent.data},s={localUnicomItem:"动力配套",localUnicomItemSum:t.order_local_unicom_power.data,localUnicomItemPercent:t.order_local_unicom_power_percent.data},r={localUnicomItem:"电缆故障",localUnicomItemSum:t.order_local_unicom_e_line.data,localUnicomItemPercent:t.order_local_unicom_e_line_percent.data},i=[a,s,e,r];return i.sort((function(t,e){return e.localUnicomItemSum-t.localUnicomItemSum})),i}))),this.itemList.push(new ct("order_local_unicom_detail","text","本地网络侧情况",(function(t){var e=[];e.push({name:"line",sum:t.order_local_unicom_line.data,text:"光缆故障"}),e.push({name:"devices",sum:t.order_local_unicom_devices.data,text:"设备故障"}),e.push({name:"power",sum:t.order_local_unicom_power.data,text:"动力配套"}),e.push({name:"e_line",sum:t.order_local_unicom_e_line.data,text:"电缆故障"}),e.sort((function(t,e){return e.sum-t.sum}));var a="";for(var s in e)e[s].sum>0&&(a=a+e[s].text+e[s].sum+"宗，占比"+(e[s].sum/t.local_data.data.length*100).toFixed(2)+"%；");return a}))),this.itemList.push(new ct("order_local_sum_detail","img","本地政企客户故障原因占比",function(){var e=Object(it["a"])(regeneratorRuntime.mark((function e(a){var s,r,i,n,o,u,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.img_list.push({name:this.name,text:this.text}),s=this.name,"",r="",i=[],n=[{name:"光缆故障",value:t.dataObject.order_local_unicom_line.data},{name:"设备故障",value:t.dataObject.order_local_unicom_devices.data},{name:"动力配套",value:t.dataObject.order_local_unicom_power.data},{name:"电缆故障",value:t.dataObject.order_local_unicom_e_line.data}],n.sort((function(t,e){return e.value-t.value})),e.t0=regeneratorRuntime.keys(n);case 8:if((e.t1=e.t0()).done){e.next=17;break}if(o=e.t1.value,!(n[o].value>0)){e.next=14;break}i.push(n[o]),e.next=15;break;case 14:return e.abrupt("break",17);case 15:e.next=8;break;case 17:return u={name:"故障量",data:i},m=t.getOption("pie",u),e.next=21,t.$nextTick((function(){r=t.getImg(s,m)}));case 21:return e.abrupt("return",r);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}())),this.itemList.push(new ct("order_local_unicom_line_detail","text","本地光缆故障详情",(function(e){var a=e.local_data.data,s=[];for(var r in _t)s.push({name:_t[r],sum:0});for(var i in a)if("光缆故障"==a[i].trouble_class)for(var n in s)if(a[i].trouble_reason==s[n].name){s[n].sum++;break}s.sort((function(t,e){return e.sum-t.sum}));for(var o=0;o<s.length;o++)0==s[o].sum&&s.splice(o);t.dataObject.add("order_local_unicom_line_list","array",s);for(var u=e.order_local_unicom_line.data,m="",d=!0,l=0,c=-1,_=0;_<s.length&&d;_++)if(_<s.length-1&&s[_].sum==s[_+1].sum)c<0&&(c=_);else{if(c<0)m=m+s[_].name+s[_].sum+"宗，占比"+(s[_].sum/u*100).toFixed(2)+"%；",l++;else{for(var h=c;h<=_;h++)m=m+s[h].name+"、";m=m.substr(0,m.length-1),m=m+"各"+s[c].sum+"宗，各占比"+(s[c].sum/u*100).toFixed(2)+"%；",l=l+_-c+1,c=-1}l>=3&&(d=!1)}return m}))),this.itemList.push(new ct("order_local_unicom_devices_detail","text","本地设备故障详情",(function(e){var a=e.local_data.data,s=[];for(var r in ht)s.push({name:ht[r],sum:0});for(var i in a)if("设备故障"==a[i].trouble_class)for(var n in s)if(a[i].trouble_reason==s[n].name){s[n].sum++;break}s.sort((function(t,e){return e.sum-t.sum}));for(var o=0;o<s.length;o++)0==s[o].sum&&s.splice(o);t.dataObject.add("order_local_unicom_devices_list","array",s);for(var u=e.order_local_unicom_devices.data,m="",d=!0,l=0,c=-1,_=0;_<s.length&&d;_++)if(_<s.length-1&&s[_].sum==s[_+1].sum)c<0&&(c=_);else{if(c<0)m=m+s[_].name+s[_].sum+"宗，占比"+(s[_].sum/u*100).toFixed(2)+"%；",l++;else{for(var h=c;h<=_;h++)m=m+s[h].name+"、";m=m.substr(0,m.length-1),m=m+"各"+s[c].sum+"宗，各占比"+(s[c].sum/u*100).toFixed(2)+"%；",l=l+_-c+1,c=-1}l>=3&&(d=!1)}return m}))),this.itemList.push(new ct("order_local_unicom_power_detail","text","本地动力配套详情",(function(e){var a=e.local_data.data,s=[];for(var r in pt)s.push({name:pt[r],sum:0});for(var i in a)if("动力配套"==a[i].trouble_class)for(var n in s)if(a[i].trouble_reason==s[n].name){s[n].sum++;break}s.sort((function(t,e){return e.sum-t.sum}));for(var o=0;o<s.length;o++)0==s[o].sum&&s.splice(o);t.dataObject.add("order_local_unicom_power_list","array",s);for(var u=e.order_local_unicom_power.data,m="",d=!0,l=0,c=-1,_=0;_<s.length&&d;_++)if(_<s.length-1&&s[_].sum==s[_+1].sum)c<0&&(c=_);else{if(c<0)m=m+s[_].name+s[_].sum+"宗，占比"+(s[_].sum/u*100).toFixed(2)+"%；",l++;else{for(var h=c;h<=_;h++)m=m+s[h].name+"、";m=m.substr(0,m.length-1),m=m+"各"+s[c].sum+"宗，各占比"+(s[c].sum/u*100).toFixed(2)+"%；",l=l+_-c+1,c=-1}l>=3&&(d=!1)}return m}))),this.itemList.push(new ct("order_local_unicom_e_line_detail","text","本地电缆故障详情",(function(e){var a=e.local_data.data,s=[];for(var r in ft)s.push({name:ft[r],sum:0});for(var i in a)if("电缆故障"==a[i].trouble_class)for(var n in s)if(a[i].trouble_reason==s[n].name){s[n].sum++;break}s.sort((function(t,e){return e.sum-t.sum}));for(var o=0;o<s.length;o++)0==s[o].sum&&s.splice(o);t.dataObject.add("order_local_unicom_e_line_list","array",s);for(var u=e.order_local_unicom_e_line.data,m="",d=!0,l=0,c=-1,_=0;_<s.length&&d;_++)if(_<s.length-1&&s[_].sum==s[_+1].sum)c<0&&(c=_);else{if(c<0)m=m+s[_].name+s[_].sum+"宗，占比"+(s[_].sum/u*100).toFixed(2)+"%；",l++;else{for(var h=c;h<=_;h++)m=m+s[h].name+"、";m=m.substr(0,m.length-1),m=m+"各"+s[c].sum+"宗，各占比"+(s[c].sum/u*100).toFixed(2)+"%；",l=l+_-c+1,c=-1}l>=3&&(d=!1)}return m}))),this.itemList.push(new ct("localUnicomLineItem1","text","本地光缆故障首项",(function(t){var e=t.order_local_unicom_line_list.data;return e&&e.length>0?e[0].name:""}))),this.itemList.push(new ct("localUnicomLineItemSum1","text","本地光缆故障首项数量",(function(t){var e=t.order_local_unicom_line_list.data;return e&&e.length>0?e[0].sum:""}))),this.itemList.push(new ct("localUnicomLineItemPercent1","text","本地光缆故障首项占比",(function(t){var e=t.order_local_unicom_line_list.data;return e&&e.length>0?(e[0].sum/t.order_local_unicom_line.data*100).toFixed(2):""}))),this.itemList.push(new ct("localUnicomDevicesItem1","text","本地设备故障首项",(function(t){var e=t.order_local_unicom_devices_list.data;return e&&e.length>0?e[0].name:""}))),this.itemList.push(new ct("localUnicomDevicesItemSum1","text","本地设备故障首项数量",(function(t){var e=t.order_local_unicom_devices_list.data;return e&&e.length>0?e[0].sum:""}))),this.itemList.push(new ct("localUnicomDevicesItemPercent1","text","本地设备故障首项占比",(function(t){var e=t.order_local_unicom_devices_list.data;return e&&e.length>0?(e[0].sum/t.order_local_unicom_devices.data*100).toFixed(2):""}))),this.itemList.push(new ct("localUnicomPowerItem1","text","本地动力配套首项",(function(t){var e=t.order_local_unicom_power_list.data;return e&&e.length>0?e[0].name:""}))),this.itemList.push(new ct("localUnicomPowerItemSum1","text","本地动力配套首项数量",(function(t){var e=t.order_local_unicom_power_list.data;return e&&e.length>0?e[0].sum:""}))),this.itemList.push(new ct("localUnicomPowerItemPercent1","text","本地动力配套首项占比",(function(t){var e=t.order_local_unicom_power_list.data;return e&&e.length>0?(e[0].sum/t.order_local_unicom_power.data*100).toFixed(2):""}))),this.itemList.push(new ct("localUnicomELineItem1","text","本地电缆故障首项",(function(t){var e=t.order_local_unicom_e_line_list.data;return e&&e.length>0?e[0].name:""}))),this.itemList.push(new ct("localUnicomELineItemSum1","text","本地电缆故障首项数量",(function(t){var e=t.order_local_unicom_e_line_list.data;return e&&e.length>0?e[0].sum:""}))),this.itemList.push(new ct("localUnicomELineItemPercent1","text","本地电缆故障首项占比",(function(t){var e=t.order_local_unicom_e_line_list.data;return e&&e.length>0?(e[0].sum/t.order_local_unicom_e_line.data*100).toFixed(2):""}))),this.itemList.push(new ct("localUnicomLineItem","array","本地光缆故障表格",(function(t){for(var e=t.order_local_unicom_line_list.data,a=[],s=1;s<e.length;s++)a.push({localUnicomLineItem:e[s].name,localUnicomLineItemSum:e[s].sum,localUnicomLineItemPercent:(e[s].sum/t.order_local_unicom_line.data*100).toFixed(2)});return a}))),this.itemList.push(new ct("localUnicomDevicesItem","array","本地设备故障表格",(function(t){for(var e=t.order_local_unicom_devices_list.data,a=[],s=1;s<e.length;s++)a.push({localUnicomDevicesItem:e[s].name,localUnicomDevicesItemSum:e[s].sum,localUnicomDevicesItemPercent:(e[s].sum/t.order_local_unicom_devices.data*100).toFixed(2)});return a}))),this.itemList.push(new ct("localUnicomPowerItem","array","本地动力配套表格",(function(t){for(var e=t.order_local_unicom_power_list.data,a=[],s=1;s<e.length;s++)a.push({localUnicomPowerItem:e[s].name,localUnicomPowerItemSum:e[s].sum,localUnicomPowerItemPercent:(e[s].sum/t.order_local_unicom_power.data*100).toFixed(2)});return a}))),this.itemList.push(new ct("localUnicomELineItem","array","本地电缆故障表格",(function(t){for(var e=t.order_local_unicom_e_line_list.data,a=[],s=1;s<e.length;s++)a.push({localUnicomELineItem:e[s].name,localUnicomELineItemSum:e[s].sum,localUnicomELineItemPercent:(e[s].sum/t.order_local_unicom_e_line.data*100).toFixed(2)});return a}))),this.itemList.push(new ct("order_local_business_type_detail","text","本地客户行业详情",(function(e){var a=e.local_data.data,s=[];for(var r in a)if("0"!=a[r].is_trouble){var i=a[r].business_type,n=!0;for(var o in s)s[o].name==i&&(s[o].sum++,n=!1);n&&s.push({name:i,sum:1})}for(var u in s)"其他行业"==s[u].name&&(s[u].name="中小企业");s.sort((function(t,e){return e.sum-t.sum})),t.dataObject.add("order_local_business_type_list","array",s);var m="";return m=s.length>1?"占比最大的是"+s[0].name+"，"+s[0].sum+"宗，占比"+(s[0].sum/e.order_local_real.data*100).toFixed(2)+"%；其次是"+s[1].name+"，"+s[1].sum+"宗，占比"+(s[1].sum/e.order_local_real.data*100).toFixed(2)+"%。":"占比最大的是"+s[0].name+"，"+s[0].sum+"宗，占比"+(s[0].sum/e.order_local_real.data*100).toFixed(2)+"%",m}))),this.itemList.push(new ct("localBusinessTypeItem","array","本地客户行业表格",(function(t){var e=t.order_local_business_type_list.data,a=[];for(var s in e)a.push({localBusinessTypeItem:e[s].name,localBusinessTypeItemSum:e[s].sum,localBusinessTypeItemPercent:(e[s].sum/t.order_local_real.data*100).toFixed(2)});return a}))),this.itemList.push(new ct("order_local_customer_detail","text","本地客户故障量分析",(function(e){var a=e.local_data.data,s=[];for(var r in a)if("0"!=a[r].is_trouble){var i=a[r].name,n=a[r].trouble_reason,o=!0;for(var u in s)s[u].name==i&&(s[u].sum++,void 0==s[u].reason[n]?s[u].reason[n]=1:s[u].reason[n]=s[u].reason[n]+1,o=!1);if(o){var m=[];m[n]=1,s.push({name:i,sum:1,reason:m})}}s.sort((function(t,e){return e.sum-t.sum}));for(var d=0;d<s.length;d++)s[d].sum<=1?s.splice(d):""!=s[d].name&&"-"!=s[d].name&&" "!=s[d].name||s.splice(d);var l=s.length>5?5:s.length;if(s.splice(l),t.dataObject.add("order_local_customer_list","array",s),0==s.length)return"所有客户均报障1宗";var c="";for(var _ in s){for(var h in s[_].reason)c=c+s[_].reason[h]+"次"+h+"、";c=c.substr(0,c.length-1),c=c+"造成"+s[_].name+"报障"+s[_].sum+"宗，占比"+(s[_].sum/e.order_local_real.data*100).toFixed(2)+"%；"}return c+="其余客户均报障1宗。",c}))),this.itemList.push(new ct("order_local_customer_sum_picture","img","本地政企客户故障量",function(){var e=Object(it["a"])(regeneratorRuntime.mark((function e(a){var s,r,i,n,o,u,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.img_list.push({name:this.name,text:this.text}),s=this.name,"",r="",i=t.dataObject.order_local_customer_list.data,!(i.length<2)){e.next=8;break}return t.img_list.pop(),e.abrupt("return","");case 8:for(u in n=[],o=[{name:"故障量",type:"bar",data:[],label:{show:!0},barMaxWidth:60}],i)n.push(i[u].name),o[0].data.push(i[u].sum);return m=t.getOption("bar",o,n),e.next=14,t.$nextTick((function(){r=t.getImg(s,m)}));case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}())),this.itemList.push(new ct("TOP33_sum","text","TOP33故障数",(function(e){var a=e.assess_data.data,s=e.local_data.data,r=[];for(var i in a)"1"==a[i].TOP33&&r.push({orderID:a[i].orderId,name:a[i].name,circuit_number:a[i].circuit_number,trouble_class:a[i].trouble_class,trouble_reason:a[i].trouble_reason,time:a[i].time,is_trouble:a[i].is_trouble,is_assess:a[i].is_assess,timeout:a[i].time_out});for(var n in s)"TOP33"==s[n].mark&&r.push({orderID:s[n].id,name:s[n].name,circuit_number:s[n].circuit_number,trouble_class:s[n].trouble_class,trouble_reason:s[n].trouble_reason,time:s[n].time,is_trouble:s[n].is_trouble,is_assess:"0",timeout:"0"});return t.dataObject.add("TOP33_list","array",r),r.length}),(function(e){t.dataObject.add("TOP33_sum","number",e)}))),this.itemList.push(new ct("TOP33_fake","text","TOP33非真实故障",(function(t){var e=t.TOP33_list.data,a=0;for(var s in e)"0"==e[s].is_trouble&&a++;return a}),(function(e){t.dataObject.add("TOP33_fake","number",e)}))),this.itemList.push(new ct("TOP33_fake_percent","text","TOP33非真实故障比例",(function(t){return(t.TOP33_fake.data/t.TOP33_sum.data*100).toFixed(2)}),(function(e){t.dataObject.add("TOP33_fake_percent","number",e)}))),this.itemList.push(new ct("TOP33_real","text","TOP33真实故障",(function(t){var e=t.TOP33_list.data,a=0;for(var s in e)"1"==e[s].is_trouble&&a++;return a}),(function(e){t.dataObject.add("TOP33_real","number",e)}))),this.itemList.push(new ct("TOP33_real_number_rate","text","TOP33故障率",(function(t){return(t.TOP33_real.data/lt*100).toFixed(2)}),(function(e){t.dataObject.add("TOP33_real_number_rate","number",e)}))),this.itemList.push(new ct("TOP33_real_percent","text","TOP33真实故障比例",(function(t){return(t.TOP33_real.data/t.TOP33_sum.data*100).toFixed(2)}),(function(e){t.dataObject.add("TOP33_real_percent","number",e)}))),this.itemList.push(new ct("TOP33_real_detail","text","TOP33真实故障情况",(function(e){var a=e.TOP33_list.data,s=[];for(var r in a)"1"==a[r].is_trouble&&s.push(a[r]);s.sort((function(t,e){return t.name.localeCompare(e.name,"zh-CN")}));for(var i=1,n=s.length-1;n>=0;n--)n>0&&s[n].name==s[n-1].name?(s[n].count="",s[n].rate="",i++):(s[n].count=i,s[n].rate=t.getNumberRate(s[n].name,i),i=1);t.dataObject.add("TOP33_real_list","array",s);var o=[];for(var u in s){var m=!0;for(var d in o)s[u].trouble_class==o[d].reason&&(o[d].sum++,m=!1);m&&o.push({reason:s[u].trouble_class,sum:1})}o.sort((function(t,e){return e.sum-t.sum}));var l="";for(var c in o)l=l+o[c].reason+o[c].sum+"宗，占比"+(o[c].sum/s.length*100).toFixed(2)+"%；";return l}))),this.itemList.push(new ct("TOP33RealItem","array","TOP33客户真实故障表格",(function(t){var e=t.TOP33_real_list.data,a=[];for(var s in e)a.push({TOP33RealItem:e[s].orderID,TOP33RealItemName:e[s].name,TOP33RealItemNumber:e[s].circuit_number,TOP33RealItemReason:e[s].trouble_class+(void 0==e[s].trouble_reason?"":"-"+e[s].trouble_reason)});return a}))),this.itemList.push(new ct("TOP33NumberItem1","text","TOP33故障率首项ID",(function(t){return void 0!=t.TOP33_real_list.data&&t.TOP33_real_list.data.length>0?t.TOP33_real_list.data[0].orderID:""}))),this.itemList.push(new ct("TOP33NumberItem1Name","text","TOP33故障率首项客户名称",(function(t){return void 0!=t.TOP33_real_list.data&&t.TOP33_real_list.data.length>0?t.TOP33_real_list.data[0].name:""}))),this.itemList.push(new ct("TOP33NumberItem1Number","text","TOP33故障率首项电路编号",(function(t){return void 0!=t.TOP33_real_list.data&&t.TOP33_real_list.data.length>0?t.TOP33_real_list.data[0].circuit_number:""}))),this.itemList.push(new ct("TOP33NumberItem1Sum","text","TOP33故障率首项数量",(function(t){return void 0!=t.TOP33_real_list.data&&t.TOP33_real_list.data.length>0?t.TOP33_real_list.data[0].count:""}))),this.itemList.push(new ct("TOP33NumberItem1Rate","text","TOP33故障率首项故障率（本客户）",(function(t){return void 0!=t.TOP33_real_list.data&&t.TOP33_real_list.data.length>0?t.TOP33_real_list.data[0].rate:""}))),this.itemList.push(new ct("TOP33NumberItem","array","TOP33故障率表格",(function(t){for(var e=t.TOP33_real_list.data,a=[],s=1;s<e.length;s++)a.push({TOP33NumberItem:e[s].orderID,TOP33NumberItemName:e[s].name,TOP33NumberItemNumber:e[s].circuit_number,TOP33NumberItemSum:e[s].count,TOP33NumberItemRate:e[s].rate});return a}))),this.itemList.push(new ct("TOP33_timeout","text","TOP33超时数",(function(e){var a=e.TOP33_list.data,s=0,r=[];for(var i in a)"1"==a[i].timeout&&"1"==a[i].is_assess&&(s++,r.push(a[i]));return t.dataObject.add("TOP33_timeout_list","array",r),s}),(function(e){t.dataObject.add("TOP33_timeout","number",e)}))),this.itemList.push(new ct("TOP33TimeoutItem","array","TOP33超时故障表格",(function(t){var e=t.TOP33_timeout_list.data,a=[];for(var s in e)a.push({TOP33TimeoutItem:e[s].orderID,TOP33TimeoutItemName:e[s].name,TOP33TimeoutItemNumber:e[s].circuit_number,TOP33TimeoutItemTime:e[s].time,TOP33TimeoutItemReason:e[s].reason});return a}))),this.itemList.push(new ct("TOP33_timeout_rate","text","TOP33及时率",(function(t){return(100*(1-t.TOP33_timeout.data/t.TOP33_sum.data)).toFixed(2)}))),this.itemList.push(new ct("TOP33_assess_sum","text","TOP33责任故障",(function(e){var a=e.assess_data.data,s=0,r=[];for(var i in a)"1"==a[i].TOP33&&"1"==a[i].is_assess&&(s++,r.push(a[i]));return t.dataObject.add("TOP33_assess_list","array",r),s}))),this.itemList.push(new ct("TOP33_assess_repeat","text","TOP33责任故障重复",(function(e){var a=e.TOP33_assess_list.data,s=[],r=[];for(var i in a){var n=!0;for(var o in s)a[i].circuit_number==s[o].number&&(s[o].sum++,s[o].orderID.push(a[i].orderID),s[o].time.push(a[i].time),s[o].reason.push(a[i].reason),n=!1);n&&s.push({name:a[i].name,orderID:[a[i].orderID],time:[a[i].time],reason:[a[i].reason],number:a[i].circuit_number,sum:1})}var u=0;for(var m in s)if(s[m]>1)for(var d in u=u+s[m].sum-1,s[m].orderID)r.push({NumberRepeatItem:s[m].orderID[d],NumberRepeatItemName:s[m].name,NumberRepeatItemNumber:s[m].number,NumberRepeatItemTime:s[m].time[d],NumberRepeatItemReason:s[m].reason[d]});return t.dataObject.add("number_repeat_list","array",r),u}))),this.itemList.push(new ct("TOP800_assess_sum","text","TOP800责任故障",(function(e){var a=e.assess_data_all.data,s=0,r=[];for(var i in a)"1"==a[i].assess_TOPN&&"1"==a[i].is_assess&&(s++,r.push(a[i]));return t.dataObject.add("TOP800_assess_list","array",r),s}))),this.itemList.push(new ct("TOP800_assess_repeat","text","TOP800责任故障重复",(function(e){var a=e.TOP800_assess_list.data,s=[];for(var r in a){var i=!0;for(var n in s)a[r].circuit_number==s[n].number&&(s[n].sum++,s[n].orderID.push(a[r].orderId),s[n].time.push(a[r].time),s[n].reason.push(a[r].trouble_class+"-"+a[r].trouble_reason),i=!1);i&&""!=a[r].circuit_number&&"客户无法提供"!=a[r].circuit_number&&"无"!=a[r].circuit_number&&s.push({number:a[r].circuit_number,sum:1,name:a[r].name,orderID:[a[r].orderId],time:[a[r].time],reason:[a[r].trouble_class+"-"+a[r].trouble_reason]})}var o=0,u=e.number_repeat_list.data;for(var m in s)if(s[m].sum>1)for(var d in o=o+s[m].sum-1,s[m].orderID)u.push({NumberRepeatItem:s[m].orderID[d],NumberRepeatItemName:s[m].name,NumberRepeatItemNumber:s[m].number,NumberRepeatItemTime:s[m].time[d],NumberRepeatItemReason:s[m].reason[d]});return t.dataObject.add("TOP800_assess_list","array",u),o}))),this.itemList.push(new ct("NON_TOP800_assess_sum","text","非TOP800责任故障",(function(e){var a=e.assess_data_all.data,s=0,r=[];for(var i in a)"0"==a[i].assess_TOPN&&"1"==a[i].is_assess&&(s++,r.push(a[i]));return t.dataObject.add("NON_TOP800_assess_list","array",r),s}))),this.itemList.push(new ct("NON_TOP800_assess_repeat","text","非TOP800责任故障重复",(function(e){var a=e.NON_TOP800_assess_list.data,s=[];for(var r in a){var i=!0;for(var n in s)a[r].circuit_number==s[n].number&&(s[n].sum++,s[n].orderID.push(a[r].orderId),s[n].time.push(a[r].time),s[n].reason.push(a[r].trouble_class+"-"+a[r].trouble_reason),i=!1);i&&""!=a[r].circuit_number&&"客户无法提供"!=a[r].circuit_number&&"无"!=a[r].circuit_number&&s.push({number:a[r].circuit_number,sum:1,name:a[r].name,orderID:[a[r].orderId],time:[a[r].time],reason:[a[r].trouble_class+"-"+a[r].trouble_reason]})}var o=0,u=e.number_repeat_list.data;for(var m in s)if(s[m].sum>2)for(var d in o=o+s[m].sum-2,s[m].orderID)u.push({NumberRepeatItem:s[m].orderID[d],NumberRepeatItemName:s[m].name,NumberRepeatItemNumber:s[m].number,NumberRepeatItemTime:s[m].time[d],NumberRepeatItemReason:s[m].reason[d]});return t.dataObject.add("TOP800_assess_list","array",u),o}))),this.itemList.push(new ct("NumberRepeatItem","array","重复电路列表",(function(t){return t.number_repeat_list.data}))),this.itemList.push(new ct("TOP210_assess_sum","text","TOP210责任故障",(function(e){var a=e.assess_data.data,s=0,r=[];for(var i in a)"1"==a[i].TOP210&&"1"==a[i].is_assess&&(s++,r.push(a[i]));return t.dataObject.add("TOP210_assess_list","array",r),s}),(function(e){t.dataObject.add("TOP210_assess_sum","number",e)}))),this.itemList.push(new ct("TOP210_assess_timeout","text","TOP210责任超时故障",(function(e){var a=e.TOP210_assess_list.data,s=[],r=0;for(var i in a)a[i].net_duration>120&&(r++,s.push({TOP210TimeoutItem:a[i].orderId,TOP210TimeoutItemName:a[i].name,TOP210TimeoutItemNumber:a[i].circuit_number,TOP210TimeoutItemTime:a[i].net_duration,TOP210TimeoutItemReason:a[i].remark.replace(/\[.*\]/,"")}));return t.dataObject.add("TOP210_timeout_list","array",s),r}),(function(e){t.dataObject.add("TOP210_assess_timeout","number",e)}))),this.itemList.push(new ct("TOP210TimeoutItem","array","TOP210超时故障表格",(function(t){return t.TOP210_timeout_list.data}))),this.itemList.push(new ct("TOP210_assess_timeout_detail","text","TOP210责任及时率情况",(function(t){var e=(100*(1-t.TOP210_assess_timeout.data/t.TOP210_assess_sum.data)).toFixed(2);return e+"%"+(e>90?"(>90%)，达标":"(<90%)，不达标")}))),this.itemList.push(new ct("TOP210_assess_all_sum","text","TOP210累计责任故障",(function(e){var a=e.assess_data_all.data,s=0,r=[];for(var i in a)"1"==a[i].TOP210&&"1"==a[i].is_assess&&(s++,r.push(a[i]));return t.dataObject.add("TOP210_assess_all_list","array",r),s}),(function(e){t.dataObject.add("TOP210_assess_all_sum","number",e)}))),this.itemList.push(new ct("TOP210_assess_all_timeout","text","TOP210累计责任超时故障",(function(t){var e=t.TOP210_assess_all_list.data,a=0;for(var s in e)e[s].net_duration>120&&a++;return a}),(function(e){t.dataObject.add("TOP210_assess_all_timeout","number",e)}))),this.itemList.push(new ct("TOP210_assess_all_timeout_detail","text","TOP210累计责任及时率情况",(function(t){var e=(100*(1-t.TOP210_assess_all_timeout.data/t.TOP210_assess_all_sum.data)).toFixed(2);return e+"%"+(e>90?"(>90%)，达标":"(<90%)，不达标")}))),this.itemList.push(new ct("TOP800_1_2_assess_sum","text","TOP800家1-2级责任故障",(function(e){var a=e.assess_data.data,s=0,r=[];for(var i in a)"1"!=a[i].assess_TOPN||"1"!=a[i].is_assess||"一级"!=a[i].level&&"二级"!=a[i].level||(s++,r.push(a[i]));return t.dataObject.add("TOP800_1_2_assess_list","array",r),s}),(function(e){t.dataObject.add("TOP800_1_2_assess_sum","number",e)}))),this.itemList.push(new ct("TOP800_1_2_assess_timeout","text","TOP800家1-2级责任超时故障",(function(e){var a=e.TOP800_1_2_assess_list.data,s=0,r=[];for(var i in a)"1"==a[i].time_out&&(s++,r.push({TOP800OneTwoTimeoutItem:a[i].orderId,TOP800OneTwoTimeoutItemName:a[i].name,TOP800OneTwoTimeoutItemNumber:a[i].circuit_number,TOP800OneTwoTimeoutItemTime:a[i].time,TOP800OneTwoTimeoutItemReason:a[i].remark.replace(/\[.*\]/,"")}));return t.dataObject.add("TOP800_1_2_timeout_list","array",r),s}),(function(e){t.dataObject.add("TOP800_1_2_assess_timeout","number",e)}))),this.itemList.push(new ct("TOP800OneTwoTimeoutItem","array","TOP800家1-2级超时故障表格",(function(t){return t.TOP800_1_2_timeout_list.data}))),this.itemList.push(new ct("TOP800_1_2_assess_timeout_detail","text","TOP800家1-2级责任及时率情况",(function(t){var e=(100*(1-t.TOP800_1_2_assess_timeout.data/t.TOP800_1_2_assess_sum.data)).toFixed(2);return e+"%"+(e>90?"(>90%)，达标":"(<90%)，不达标")}))),this.itemList.push(new ct("TOP800_1_2_assess_all_sum","text","TOP800家累计1-2级责任故障",(function(e){var a=e.assess_data_all.data,s=0,r=[];for(var i in a)"1"!=a[i].assess_TOPN||"1"!=a[i].is_assess||"一级"!=a[i].level&&"二级"!=a[i].level||(s++,r.push(a[i]));return t.dataObject.add("TOP800_1_2_assess_all_list","array",r),s}),(function(e){t.dataObject.add("TOP800_1_2_assess_all_sum","number",e)}))),this.itemList.push(new ct("TOP800_1_2_assess_all_timeout","text","TOP800家累计1-2级责任超时故障",(function(t){var e=t.TOP800_1_2_assess_all_list.data,a=0;for(var s in e)"1"==e[s].time_out&&a++;return a}),(function(e){t.dataObject.add("TOP800_1_2_assess_all_timeout","number",e)}))),this.itemList.push(new ct("TOP800_1_2_assess_all_timeout_detail","text","TOP800家累计1-2级责任及时率情况",(function(t){var e=(100*(1-t.TOP800_1_2_assess_all_timeout.data/t.TOP800_1_2_assess_all_sum.data)).toFixed(2);return e+"%"+(e>90?"(>90%)，达标":"(<90%)，不达标")}))),this.itemList.push(new ct("TOP800_3_6_assess_sum","text","TOP800家3-6级责任故障",(function(e){var a=e.assess_data.data,s=0,r=[];for(var i in a)"1"!=a[i].assess_TOPN||"1"!=a[i].is_assess||"三级"!=a[i].level&&"四级"!=a[i].level&&"五级"!=a[i].level&&"六级"!=a[i].level||(s++,r.push(a[i]));return t.dataObject.add("TOP800_3_6_assess_list","array",r),s}),(function(e){t.dataObject.add("TOP800_3_6_assess_sum","number",e)}))),this.itemList.push(new ct("TOP800_3_6_assess_timeout","text","TOP800家3-6级责任超时故障",(function(e){var a=e.TOP800_3_6_assess_list.data,s=0,r=[];for(var i in a)"1"==a[i].time_out&&(s++,r.push({TOP800ThreeSixTimeoutItem:a[i].orderId,TOP800ThreeSixTimeoutItemName:a[i].name,TOP800ThreeSixTimeoutItemNumber:a[i].circuit_number,TOP800ThreeSixTimeoutItemTime:a[i].time,TOP800ThreeSixTimeoutItemReason:a[i].remark.replace(/\[.*\]/,"")}));return t.dataObject.add("TOP800_3_6_timeout_list","array",r),s}),(function(e){t.dataObject.add("TOP800_3_6_assess_timeout","number",e)}))),this.itemList.push(new ct("TOP800ThreeSixTimeoutItem","array","TOP800家3-6级超时故障表格",(function(t){return t.TOP800_3_6_timeout_list.data}))),this.itemList.push(new ct("TOP800_3_6_assess_timeout_detail","text","TOP800家3-6级责任及时率情况",(function(t){var e=(100*(1-t.TOP800_3_6_assess_timeout.data/t.TOP800_3_6_assess_sum.data)).toFixed(2);return e+"%"+(e>95?"(>95%)，达标":"(<95%)，不达标")}))),this.itemList.push(new ct("TOP800_3_6_assess_all_sum","text","TOP800家累计3-6级责任故障",(function(e){var a=e.assess_data_all.data,s=0,r=[];for(var i in a)"1"!=a[i].assess_TOPN||"1"!=a[i].is_assess||"三级"!=a[i].level&&"四级"!=a[i].level&&"五级"!=a[i].level&&"六级"!=a[i].level||(s++,r.push(a[i]));return t.dataObject.add("TOP800_3_6_assess_all_list","array",r),s}),(function(e){t.dataObject.add("TOP800_3_6_assess_all_sum","number",e)}))),this.itemList.push(new ct("TOP800_3_6_assess_all_timeout","text","TOP800家累计3-6级责任超时故障",(function(t){var e=t.TOP800_3_6_assess_all_list.data,a=0;for(var s in e)"1"==e[s].time_out&&a++;return a}),(function(e){t.dataObject.add("TOP800_3_6_assess_all_timeout","number",e)}))),this.itemList.push(new ct("TOP800_3_6_assess_all_timeout_detail","text","TOP800家累计3-6级责任及时率情况",(function(t){var e=(100*(1-t.TOP800_3_6_assess_all_timeout.data/t.TOP800_3_6_assess_all_sum.data)).toFixed(2);return e+"%"+(e>95?"(>95%)，达标":"(<95%)，不达标")}))),this.itemList.push(new ct("all_assess_sum","text","所有客户责任故障",(function(e){var a=e.assess_data.data,s=0,r=[];for(var i in a)"1"==a[i].is_assess&&(s++,r.push(a[i]));return t.dataObject.add("all_assess_list","array",r),s}),(function(e){t.dataObject.add("all_assess_sum","number",e)}))),this.itemList.push(new ct("all_assess_timeout","text","所有客户责任超时故障",(function(e){var a=e.all_assess_list.data,s=0,r=[];for(var i in a)"1"==a[i].time_out&&(s++,r.push({TimeoutItem:a[i].orderId,TimeoutItemName:a[i].name,TimeoutItemNumber:a[i].circuit_number,TimeoutItemTime:a[i].time,TimeoutItemReason:a[i].remark.replace(/\[.*\]/,"")}));return t.dataObject.add("timeout_list","array",r),s}),(function(e){t.dataObject.add("all_assess_timeout","number",e)}))),this.itemList.push(new ct("TimeoutItem","array","所有客户超时故障表格",(function(t){return t.timeout_list.data}))),this.itemList.push(new ct("all_assess_timeout_detail","text","所有客户责任及时率情况",(function(t){var e=(100*(1-t.all_assess_timeout.data/t.all_assess_sum.data)).toFixed(2);return e+"%"+(e>95?"(>95%)，达标":"(<95%)，不达标")}))),this.itemList.push(new ct("all_assess_all_sum","text","所有客户累计责任故障",(function(e){var a=e.assess_data_all.data,s=0,r=[];for(var i in a)"1"==a[i].is_assess&&(s++,r.push(a[i]));return t.dataObject.add("all_assess_all_list","array",r),s}),(function(e){t.dataObject.add("all_assess_all_sum","number",e)}))),this.itemList.push(new ct("all_assess_all_timeout","text","所有客户累计责任超时故障",(function(t){var e=t.all_assess_all_list.data,a=0;for(var s in e)"1"==e[s].time_out&&a++;return a}),(function(e){t.dataObject.add("all_assess_all_timeout","number",e)}))),this.itemList.push(new ct("all_assess_all_timeout_detail","text","所有客户累计责任及时率情况",(function(t){var e=(100*(1-t.all_assess_all_timeout.data/t.all_assess_all_sum.data)).toFixed(2);return e+"%"+(e>95?"(>95%)，达标":"(<95%)，不达标")})))}}},gt=bt,yt=(a("b7a0"),Object(u["a"])(gt,st,rt,!1,null,"56c3e9cf",null)),xt=yt.exports;s["default"].use(_["a"]);var wt=new _["a"]({routes:[{path:"/",name:"index",component:z},{path:"/daily",name:"daily",component:Q},{path:"/orderList",name:"orderList",component:at},{path:"/reportGenerator",name:"reportGenerator",component:xt}]}),Ot=a("bc3a"),Tt=a.n(Ot),Dt=a("a7fe"),Pt=a.n(Dt),Lt=a("c695"),jt=a.n(Lt),It=a("309d"),kt=a("cf75"),Mt=a.n(kt),Ft=a("5c96"),St=a.n(Ft),Nt=(a("0fae"),a("5d37"),a("4eb5")),Rt=a.n(Nt);s["default"].config.productionTip=!1,s["default"].use(Pt.a,Tt.a),s["default"].use(c.a),s["default"].use(Mt.a),s["default"].use(It["a"],jt.a),s["default"].use(St.a),s["default"].use(Rt.a),new s["default"]({router:wt,render:function(t){return t(d)}}).$mount("#app")},"62ac":function(t,e,a){"use strict";var s=a("35c0"),r=a.n(s);r.a},"85ec":function(t,e,a){},b4a1:function(t,e,a){"use strict";var s=a("0270"),r=a.n(s);r.a},b7a0:function(t,e,a){"use strict";var s=a("c9ea"),r=a.n(s);r.a},c9ea:function(t,e,a){},f78b:function(t,e,a){"use strict";var s=a("3923"),r=a.n(s);r.a}});
//# sourceMappingURL=app.ffdac03a.js.map