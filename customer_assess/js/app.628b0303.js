(function(t){function e(e){for(var r,o,i=e[0],u=e[1],c=e[2],p=0,f=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&f.push(s[o][0]),s[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);l&&l(e);while(f.length)f.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,i=1;i<a.length;i++){var u=a[i];0!==s[u]&&(r=!1)}r&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},s={app:0},n=[];function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var l=u;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var r=a("85ec"),s=a.n(r);s.a},"387f":function(t,e,a){"use strict";var r=a("e00d"),s=a.n(r);s.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},n=[],o={name:"app",components:{}},i=o,u=(a("034f"),a("2877")),c=Object(u["a"])(i,s,n,!1,null,null,null),l=c.exports,p=a("2819"),f=a.n(p),m=a("8c4f"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"quter"},[a("ve-line",{attrs:{data:t.SumData,title:t.sumTitle}})],1),a("div",{staticClass:"quter"},[a("ve-histogram",{attrs:{data:t.customerData,extend:t.customerExtend,settings:t.customerSettings}})],1),a("div",{staticClass:"quter"},[a("ve-line",{attrs:{data:t.SumLocalData,title:t.sumLocalTitle}})],1),a("div",{staticClass:"quter"},[a("ve-histogram",{attrs:{data:t.customerLocalData,extend:t.customerLocalExtend,settings:t.customerLocalSettings}})],1),a("div",{attrs:{id:"import"},on:{click:t.import19}},[a("a",{attrs:{href:"javascript:void(0)"}},[t._v(t._s(t.import_text))]),a("input",{ref:"filElem",attrs:{type:"file"},on:{change:t.get_file}})])])},d=[],v=(a("fb6a"),a("b0c0"),a("4d63"),a("ac1f"),a("25f0"),a("5319"),"172.0.0.233/gensmo/");Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t};var g={name:"Index",data:function(){return{sumTitle:{show:!0,text:"19故障量分析"},SumData:{columns:["日期","故障量","责任故障量"],rows:[]},sumLocalTitle:{show:!0,text:"本地故障量分析"},SumLocalData:{columns:["日期","故障量","责任故障量"],rows:[]},customerExtend:{title:{show:!0,text:"19客户故障量排行"},xAxis:{axisLabel:{rotate:-60,formatter:function(t){var e="";return e=t.length>8?t.substring(0,8)+"...":t,e}}}},customerSettings:{stack:{"故障量":["责任故障","非责任故障"]}},customerData:{columns:["客户名称","责任故障","非责任故障"],rows:[]},customerLocalExtend:{title:{show:!0,text:"本地客户故障量排行"},xAxis:{axisLabel:{rotate:-60,formatter:function(t){var e="";return e=t.length>8?t.substring(0,8)+"...":t,e}}}},customerLocalSettings:{stack:{"故障量":["责任故障","非责任故障"]}},customerLocalData:{columns:["客户名称","责任故障","非责任故障"],rows:[]},rawData:[],rawLocalData:[],sum:0,importFlag:!1,import_text:"导入19数据（请选择“沃运维”系统导出的故障单列表）"}},created:function(){this.init()},methods:{init:function(){var t=new Date,e=new Date;t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),this.getData(t.Format("yyyy-MM-dd hh:mm:ss"),e.Format("yyyy-MM-dd hh:mm:ss"))},getData:function(t,e){var a=this,r=new FormData;r.append("START",t),r.append("END",e),this.axios.post("http://"+v+"scripts/assess_order/get_order_by_datetime.php",r).then((function(t){"success"==t.data.status?(a.rawData=t.data.result,a.sum=t.data.sum,a.getSum(),a.getCustomer()):alert(t.data.errMsg)})).catch((function(t){alert(t)}));var s=new FormData;s.append("id",""),s.append("name",""),s.append("start_time_start",""),s.append("start_time_end",""),s.append("end_time_start",t),s.append("end_time_end",e),s.append("number",""),s.append("index",""),s.append("limit",""),this.axios.post("http://"+v+"scripts/getList.php",s).then((function(t){"success"==t.data.status?(a.rawLocalData=t.data.result,a.getLocalSum(),a.getLocalCustomer()):alert(t.data.errMsg)})).catch((function(t){alert(t)}))},getSum:function(){var t=[],e=[],a=new Date;a.setHours(0),a.setMinutes(0),a.setSeconds(0);for(var r=a.getDate(),s=a.getMonth()+1,n=0;n<r+1;n++)t.push(new Date(a.setDate(n+1))),e.push({"日期":s+"月"+(n+1)+"日","故障量":0,"责任故障量":0});for(var o in e.pop(),this.rawData){var i=this.rawData[o];if("广东省广州市"==this.rawData[o].province)for(var u=new Date(i.end_time),c=0;c<r;c++)if(u>t[c]&&u<t[c+1]){e[c]["故障量"]=e[c]["故障量"]+1,"1"==i.is_assess&&(e[c]["责任故障量"]=e[c]["责任故障量"]+1);break}}this.SumData.rows=e},getCustomer:function(){var t=[];for(var e in this.rawData)if("广东省广州市"==this.rawData[e].province){var a=this.rawData[e].name,r=!1;for(var s in t)if(t[s]["客户名称"]==a){"1"==this.rawData[e].is_assess?t[s]["责任故障"]=t[s]["责任故障"]+1:t[s]["非责任故障"]=t[s]["非责任故障"]+1,t[s].sum=t[s].sum+1,r=!0;break}if(!r){var n={"客户名称":a,"责任故障":0,"非责任故障":0,sum:1};"1"==this.rawData[e].is_assess?n["责任故障"]=1:n["非责任故障"]=1,t.push(n)}}t.sort((function(t,e){return t["sum"]-e["sum"]})),t.reverse(),t.length>15?this.customerData.rows=t.slice(0,15):this.customerData.rows=t},getLocalSum:function(){var t=[],e=[],a=new Date;a.setHours(0),a.setMinutes(0),a.setSeconds(0);for(var r=a.getDate(),s=a.getMonth()+1,n=0;n<r+1;n++)t.push(new Date(a.setDate(n+1))),e.push({"日期":s+"月"+(n+1)+"日","故障量":0,"责任故障量":0});for(var o in e.pop(),this.rawLocalData)for(var i=this.rawLocalData[o],u=new Date(i.end_time),c=0;c<r;c++)if(u>t[c]&&u<t[c+1]){e[c]["故障量"]=e[c]["故障量"]+1,"1"==i.is_trouble&&(e[c]["责任故障量"]=e[c]["责任故障量"]+1);break}this.SumLocalData.rows=e},getLocalCustomer:function(){var t=[];for(var e in this.rawLocalData){var a=this.rawLocalData[e].name,r=!1;for(var s in t)if(t[s]["客户名称"]==a){"1"==this.rawLocalData[e].is_trouble?t[s]["责任故障"]=t[s]["责任故障"]+1:t[s]["非责任故障"]=t[s]["非责任故障"]+1,t[s].sum=t[s].sum+1,r=!0;break}if(!r){var n={"客户名称":a,"责任故障":0,"非责任故障":0,sum:1};"1"==this.rawLocalData[e].is_trouble?n["责任故障"]=1:n["非责任故障"]=1,t.push(n)}}t.sort((function(t,e){return t["sum"]-e["sum"]})),t.reverse(),t.length>15?this.customerLocalData.rows=t.slice(0,15):this.customerLocalData.rows=t},import19:function(){this.$refs.filElem.dispatchEvent(new MouseEvent("click"))},get_file:function(){var t=this;if(!t.importFlag)if(t.importFlag=!0,t.import_text="导入中，请稍后...",""!=this.$refs.filElem.value){var e=this.$refs.filElem.files[0],a=new FormData;a.append("file",e),this.axios.post("http://"+v+"scripts/assess_order/import_from_19.php",a).then((function(e){t.importFlag=!1,t.import_text="导入19数据（请选择“沃运维”系统导出的故障单列表）","success"==e.data.status?alert("成功导入"+e.data.sum+"条记录!"):(console.log(e),alert("错误:"+e.data.errMsg)),t.$refs.filElem.value=""})).catch((function(e){console.log(e),t.importFlag=!1,t.import_text="导入19数据（请选择“沃运维”系统导出的故障单列表）",t.$refs.filElem.value=""}))}else t.importFlag=!1}}},w=g,D=(a("387f"),Object(u["a"])(w,h,d,!1,null,"4668cdc4",null)),_=D.exports;r["a"].use(m["a"]);var x=new m["a"]({routes:[{path:"/",name:"index",component:_}]}),b=a("bc3a"),y=a.n(b),L=a("a7fe"),S=a.n(L);r["a"].config.productionTip=!1,r["a"].use(S.a,y.a),r["a"].use(f.a),new r["a"]({router:x,render:function(t){return t(l)}}).$mount("#app")},"85ec":function(t,e,a){},e00d:function(t,e,a){}});
//# sourceMappingURL=app.628b0303.js.map