(function(t){function e(e){for(var i,o,n=e[0],u=e[1],l=e[2],m=0,h=[];m<n.length;m++)o=n[m],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&h.push(s[o][0]),s[o]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);c&&c(e);while(h.length)h.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,n=1;n<a.length;n++){var u=a[n];0!==s[u]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},s={app:0},r=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],u=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var c=u;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("85ec"),s=a.n(i);s.a},"1f75":function(t,e,a){"use strict";var i=a("665d"),s=a.n(i);s.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],o={name:"app",components:{}},n=o,u=(a("034f"),a("2877")),l=Object(u["a"])(n,s,r,!1,null,null,null),c=l.exports,m=a("2819"),h=a.n(m),d=a("8c4f"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"quter"},[a("sumLine",{attrs:{wywData:t.rawData,localData:t.rawLocalData}})],1),a("div",{staticClass:"quter"},[a("customerHis",{attrs:{wywData:t.rawData,localData:t.rawLocalData}})],1),a("timeout",{staticClass:"half",attrs:{wywData:t.rawData}}),a("div",{attrs:{id:"import"}},[a("a",{attrs:{href:"javascript:void(0)"},on:{click:t.import19}},[t._v(t._s(t.import_text))]),a("input",{ref:"filElem",attrs:{type:"file"},on:{change:t.get_file}})])],1)},p=[],g=(a("4d63"),a("ac1f"),a("25f0"),a("5319"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ve-line",{attrs:{data:t.SumData,extend:t.sumExtend}})],1)}),w=[];Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t};var v={name:"sumLine",props:["wywData","localData"],watch:{wywData:function(){this.rawData=this.wywData,this.getSum(),this.dataReady&&this.dataLocalReady&&(this.dataLocalReady=!1),this.dataReady=!0,this.dataReady&&this.dataLocalReady&&this.get_union()},localData:function(){this.rawLocalData=this.localData,this.getLocalSum(),this.dataReady&&this.dataLocalReady&&(this.dataReady=!1),this.dataLocalReady=!0,this.dataReady&&this.dataLocalReady&&this.get_union()}},data:function(){return{sumExtend:{title:{show:!0,text:"故障量标题"},toolbox:{show:!0,feature:{myPause:{show:!0,title:"暂停轮播",icon:"path://M341.333333 113.777778a28.444444 28.444444 0 0 1 28.444445 28.444444v739.555556a28.444444 28.444444 0 0 1-56.888889 0V142.222222a28.444444 28.444444 0 0 1 28.444444-28.444444z m341.333334 0a28.444444 28.444444 0 0 1 28.444444 28.444444v739.555556a28.444444 28.444444 0 0 1-56.888889 0V142.222222a28.444444 28.444444 0 0 1 28.444445-28.444444z",onclick:this.play},myPlay:{show:!1,title:"继续轮播",icon:"path://M221.790362 1014.94374c-36.775578 0-68.472488-13.843286-91.662653-40.033785-23.130813-26.121937-35.868929-63.466474-35.868928-105.155968V154.424068c0-41.691541 12.739139-79.041194 35.869952-105.169271 23.193235-26.197662 54.889121-40.044018 91.662652-40.044018 27.752064 0 56.166207 8.159844 84.451414 24.25338l570.119699 358.735338 0.153496 0.088004c50.086745 28.728298 78.901001 72.395844 79.053474 119.806643 0 48.284703-28.559453 91.193978-80.418564 120.835066l-0.163729 0.093121L308.632219 989.273081C278.266631 1006.546489 249.860674 1014.94374 221.790362 1014.94374zM221.790362 63.144132c-44.709271 0-73.598228 35.82902-73.598228 91.279936v715.330942c0 55.43659 28.888957 91.2564 73.598228 91.2564 18.275225 0 38.137599-6.03239 59.034535-17.929348l0.165775-0.095167 566.30993-356.24154c35.544541-20.447704 54.333466-46.232974 54.333466-74.56423-0.105401-37.916565-32.837896-62.23953-52.339042-73.362868l-1.198292-0.713244L278.571576 79.725786l-0.169868-0.096191C259.408121 68.843948 239.833297 63.144132 221.790362 63.144132z",onclick:this.play},myChange:{show:!0,title:"切换维度",icon:"path://M480 32a32 32 0 0 0 32 32c119.664 0 232.16 46.608 316.768 131.232C913.392 279.84 960 392.336 960 512c0 118.096-45.472 229.168-128 313.392V736a32 32 0 0 0-64 0v192h192a32 32 0 0 0 0-64h-76.416C974.16 768.512 1024 644.112 1024 512c0-136.752-53.264-265.328-149.984-362.032C777.328 53.264 648.752 0 512 0a32 32 0 0 0-32 32zM149.984 874.032C246.672 970.736 375.248 1024 512 1024a32 32 0 0 0 0-64c-119.664 0-232.16-46.608-316.768-131.232C110.608 744.16 64 631.664 64 512c0-118.096 45.472-229.168 128-313.392V288a32 32 0 0 0 64 0V96H64a32 32 0 0 0 0 64h76.416C49.84 255.488 0 379.888 0 512c0 136.752 53.264 265.328 149.984 362.032z",onclick:this.change},saveAsImage:{show:!0}}}},sumDataArray:{length:4,flag:0,title:["19故障量","本地故障量","总体故障量","总体责任故障量"],columns:[["日期","故障量","责任故障量"],["日期","故障量","责任故障量"],["日期","19工单","本地工单"],["日期","19工单","本地工单"]],rows:[],loading:!0},SumData:{columns:["日期","故障量","责任故障量"],rows:[]},dataReady:!1,dataLocalReady:!1,rawData:this.data,rawLocalData:this.localData,sum:0,timer:void 0,playing:!0}},created:function(){this.init()},methods:{init:function(){console.log("sum init"),this.timer=setTimeout(this.change,5e3)},getSum:function(){var t=[],e=[],a=new Date;a.setHours(0),a.setMinutes(0),a.setSeconds(0);for(var i=a.getDate(),s=a.getMonth()+1,r=0;r<i+1;r++)t.push(new Date(a.setDate(r+1))),e.push({"日期":s+"月"+(r+1)+"日","故障量":0,"责任故障量":0});for(var o in e.pop(),this.rawData){var n=this.rawData[o];if("广东省广州市"==this.rawData[o].province)for(var u=new Date(n.end_time),l=0;l<i;l++)if(u>t[l]&&u<t[l+1]){e[l]["故障量"]=e[l]["故障量"]+1,"1"==n.is_assess&&(e[l]["责任故障量"]=e[l]["责任故障量"]+1);break}}this.sumDataArray.rows[0]=e},getLocalSum:function(){var t=[],e=[],a=new Date;a.setHours(0),a.setMinutes(0),a.setSeconds(0);for(var i=a.getDate(),s=a.getMonth()+1,r=0;r<i+1;r++)t.push(new Date(a.setDate(r+1))),e.push({"日期":s+"月"+(r+1)+"日","故障量":0,"责任故障量":0});for(var o in e.pop(),this.rawLocalData)for(var n=this.rawLocalData[o],u=new Date(n.end_time),l=0;l<i;l++)if(u>t[l]&&u<t[l+1]){e[l]["故障量"]=e[l]["故障量"]+1,"1"==n.is_trouble&&(e[l]["责任故障量"]=e[l]["责任故障量"]+1);break}this.sumDataArray.rows[1]=e},get_union:function(){var t=[],e=new Date;e.setHours(0),e.setMinutes(0),e.setSeconds(0);for(var a=e.getDate(),i=e.getMonth()+1,s=[],r=[],o=0;o<a+1;o++)t.push(new Date(e.setDate(o+1))),s.push({"日期":i+"月"+(o+1)+"日","19工单":0,"本地工单":0}),r.push({"日期":i+"月"+(o+1)+"日","19工单":0,"本地工单":0});for(var n in s.pop(),r.pop(),this.rawData){var u=this.rawData[n];if("广东省广州市"==this.rawData[n].province)for(var l=new Date(u.end_time),c=0;c<a;c++)if(l>t[c]&&l<t[c+1]){s[c]["19工单"]=s[c]["19工单"]+1,"1"==u.is_assess&&(r[c]["19工单"]=r[c]["19工单"]+1);break}}for(var m in this.rawLocalData)for(var h=this.rawLocalData[m],d=new Date(h.end_time),f=0;f<a;f++)if(d>t[f]&&d<t[f+1]){s[f]["本地工单"]=s[f]["本地工单"]+1,"1"==h.is_trouble&&(r[f]["本地工单"]=r[f]["本地工单"]+1);break}this.sumDataArray.rows[2]=s,this.sumDataArray.rows[3]=r,this.sumDataArray.loading=!1;var p={columns:this.sumDataArray.columns[0],rows:this.sumDataArray.rows[0]};this.SumData=p,this.sumExtend.title={show:!0,text:this.sumDataArray.title[0]}},change:function(t){if(void 0!=this.timer&&clearTimeout(this.timer),this.playing&&(this.timer=setTimeout(this.change,5e3)),!this.sumDataArray.loading){this.sumDataArray.flag+1>=this.sumDataArray.length?this.sumDataArray.flag=0:this.sumDataArray.flag++;var e=this.sumDataArray.flag,a={columns:this.sumDataArray.columns[e],rows:this.sumDataArray.rows[e]};this.SumData=a,this.sumExtend.title={show:!0,text:this.sumDataArray.title[e]}}},play:function(){void 0!=this.timer?(clearTimeout(this.timer),this.timer=void 0,this.playing=!1,this.sumExtend.toolbox.feature.myPlay.show=!0,this.sumExtend.toolbox.feature.myPause.show=!1):(this.playing=!0,this.change(),this.sumExtend.toolbox.feature.myPlay.show=!1,this.sumExtend.toolbox.feature.myPause.show=!0)}}},y=v,D=Object(u["a"])(y,g,w,!1,null,"3d152e61",null),x=D.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ve-histogram",{attrs:{data:t.customerData,extend:t.customerExtend,settings:t.customerSettings}})],1)},_=[],M=(a("fb6a"),a("b0c0"),a("d4ec")),L=a("bee2");Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t},Array.prototype.clone=function(){for(var t=[],e=0;e<this.length;e++)t.push(this[e].clone());return t};var R=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Object(M["a"])(this,t),this["客户名称"]=e,this["责任故障"]=a,this["非责任故障"]=i,this.sum=s}return Object(L["a"])(t,[{key:"clone",value:function(){return new t(this["客户名称"],this["责任故障"],this["非责任故障"],this.sum)}},{key:"addSum1",value:function(){this["责任故障"]=this["责任故障"]+1,this.sum=this.sum+1}},{key:"addSum2",value:function(){this["非责任故障"]=this["非责任故障"]+1,this.sum=this.sum+1}},{key:"is",value:function(t){return this["客户名称"]==t}},{key:"isCustomer",value:function(t){return this["客户名称"]==t["客户名称"]}},{key:"add",value:function(t){this["责任故障"]=this["责任故障"]+t["责任故障"],this["非责任故障"]=this["非责任故障"]+t["非责任故障"],this.sum=this["责任故障"]+this["非责任故障"]}}]),t}(),S={name:"customerHis",props:["wywData","localData"],watch:{wywData:function(){this.rawData=this.wywData,this.getCustomer(),this.dataReady&&this.dataLocalReady&&(this.dataLocalReady=!1),this.dataReady=!0,this.dataReady&&this.dataLocalReady&&this.get_union()},localData:function(){this.rawLocalData=this.localData,this.getLocalCustomer(),this.dataReady&&this.dataLocalReady&&(this.dataReady=!1),this.dataLocalReady=!0,this.dataReady&&this.dataLocalReady&&this.get_union()}},data:function(){return{customerExtend:{title:{show:!0,text:"客户故障量标题"},xAxis:{axisLabel:{rotate:-60,formatter:function(t){var e="";return e=t.length>8?t.substring(0,8)+"...":t,e}}},toolbox:{show:!0,feature:{myPause:{show:!0,title:"暂停轮播",icon:"path://M341.333333 113.777778a28.444444 28.444444 0 0 1 28.444445 28.444444v739.555556a28.444444 28.444444 0 0 1-56.888889 0V142.222222a28.444444 28.444444 0 0 1 28.444444-28.444444z m341.333334 0a28.444444 28.444444 0 0 1 28.444444 28.444444v739.555556a28.444444 28.444444 0 0 1-56.888889 0V142.222222a28.444444 28.444444 0 0 1 28.444445-28.444444z",onclick:this.play},myPlay:{show:!1,title:"继续轮播",icon:"path://M221.790362 1014.94374c-36.775578 0-68.472488-13.843286-91.662653-40.033785-23.130813-26.121937-35.868929-63.466474-35.868928-105.155968V154.424068c0-41.691541 12.739139-79.041194 35.869952-105.169271 23.193235-26.197662 54.889121-40.044018 91.662652-40.044018 27.752064 0 56.166207 8.159844 84.451414 24.25338l570.119699 358.735338 0.153496 0.088004c50.086745 28.728298 78.901001 72.395844 79.053474 119.806643 0 48.284703-28.559453 91.193978-80.418564 120.835066l-0.163729 0.093121L308.632219 989.273081C278.266631 1006.546489 249.860674 1014.94374 221.790362 1014.94374zM221.790362 63.144132c-44.709271 0-73.598228 35.82902-73.598228 91.279936v715.330942c0 55.43659 28.888957 91.2564 73.598228 91.2564 18.275225 0 38.137599-6.03239 59.034535-17.929348l0.165775-0.095167 566.30993-356.24154c35.544541-20.447704 54.333466-46.232974 54.333466-74.56423-0.105401-37.916565-32.837896-62.23953-52.339042-73.362868l-1.198292-0.713244L278.571576 79.725786l-0.169868-0.096191C259.408121 68.843948 239.833297 63.144132 221.790362 63.144132z",onclick:this.play},myChange:{show:!0,title:"切换维度",icon:"path://M480 32a32 32 0 0 0 32 32c119.664 0 232.16 46.608 316.768 131.232C913.392 279.84 960 392.336 960 512c0 118.096-45.472 229.168-128 313.392V736a32 32 0 0 0-64 0v192h192a32 32 0 0 0 0-64h-76.416C974.16 768.512 1024 644.112 1024 512c0-136.752-53.264-265.328-149.984-362.032C777.328 53.264 648.752 0 512 0a32 32 0 0 0-32 32zM149.984 874.032C246.672 970.736 375.248 1024 512 1024a32 32 0 0 0 0-64c-119.664 0-232.16-46.608-316.768-131.232C110.608 744.16 64 631.664 64 512c0-118.096 45.472-229.168 128-313.392V288a32 32 0 0 0 64 0V96H64a32 32 0 0 0 0 64h76.416C49.84 255.488 0 379.888 0 512c0 136.752 53.264 265.328 149.984 362.032z",onclick:this.change},saveAsImage:{show:!0}}}},dataArray:{length:3,flag:0,title:["19客户故障量排行","本地客户故障量排行","总体故障量排行"],rows:[],loading:!0},customerData:{columns:["客户名称","责任故障","非责任故障"],rows:[]},customerSettings:{stack:{"故障量":["责任故障","非责任故障"]}},fullData:[],fullLocalData:[],dataReady:!1,dataLocalReady:!1,rawData:this.data,rawLocalData:this.localData,sum:0,timer:void 0,playing:!0}},created:function(){this.init()},methods:{init:function(){console.log("customer init"),this.timer=setTimeout(this.change,5e3)},getCustomer:function(){var t=[];for(var e in this.rawData)if("广东省广州市"==this.rawData[e].province){for(var a=this.rawData[e].name,i=!1,s=0;s<t.length;s++)if(t[s].is(a)){"1"==this.rawData[e].is_assess?t[s].addSum1():t[s].addSum2(),i=!0;break}if(!i){var r=new R(a);"1"==this.rawData[e].is_assess?r.addSum1():r.addSum2(),t.push(r)}}t.sort((function(t,e){return t["sum"]-e["sum"]})),this.fullData=t,t.reverse(),t.length>15?this.dataArray.rows[0]=t.slice(0,15):this.dataArray.rows[0]=t},getLocalCustomer:function(){var t=[];for(var e in this.rawLocalData){for(var a=this.rawLocalData[e].name,i=!1,s=0;s<t.length;s++)if(t[s].is(a)){"1"==this.rawLocalData[e].is_trouble?t[s].addSum1():t[s].addSum2(),i=!0;break}if(!i){var r=new R(a);"1"==this.rawLocalData[e].is_trouble?r.addSum1():r.addSum2(),t.push(r)}}t.sort((function(t,e){return t["sum"]-e["sum"]})),t.reverse(),this.fullLocalData=t,t.length>15?this.dataArray.rows[1]=t.slice(0,15):this.dataArray.rows[1]=t},get_union:function(){var t=this.customerConcat(this.fullData,this.fullLocalData);t.length>15?this.dataArray.rows[2]=t.slice(0,15):this.dataArray.rows[2]=t,this.dataArray.loading=!1,this.customerData.rows=this.dataArray.rows[0],this.customerExtend.title={show:!0,text:this.dataArray.title[0]}},customerConcat:function(t,e){for(var a=t.clone(),i=t.length,s=0;s<e.length;s++){for(var r=!0,o=0;o<i&&r;o++)t[o].isCustomer(e[s])&&(a[o].add(e[s]),r=!1);r&&a.push(e[s].clone())}return a.sort((function(t,e){return t["sum"]-e["sum"]})),a.reverse(),a},change:function(){if(void 0!=this.timer&&clearTimeout(this.timer),this.playing&&(this.timer=setTimeout(this.change,5e3)),!this.dataArray.loading){this.dataArray.flag+1>=this.dataArray.length?this.dataArray.flag=0:this.dataArray.flag++;var t=this.dataArray.flag;this.customerData.rows=this.dataArray.rows[t],this.customerExtend.title={show:!0,text:this.dataArray.title[t]}}},play:function(){void 0!=this.timer?(clearTimeout(this.timer),this.timer=void 0,this.playing=!1,this.customerExtend.toolbox.feature.myPlay.show=!0,this.customerExtend.toolbox.feature.myPause.show=!1):(this.playing=!0,this.change(),this.customerExtend.toolbox.feature.myPlay.show=!1,this.customerExtend.toolbox.feature.myPause.show=!0)}}},A=S,E=Object(u["a"])(A,b,_,!1,null,"17bee9ea",null),C=E.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container"},[a("div",{staticClass:"timecount"},[a("div",{staticClass:"title"},[t._v(" 考核指标 ")]),a("vxe-table",{attrs:{align:"center",data:t.timeCount,"max-height":"90%","auto-resize":""}},[a("vxe-table-column",{attrs:{width:"26%",field:"item",title:"考核项目"}}),a("vxe-table-column",{attrs:{width:"17%",field:"sum",title:"总工单数"}}),a("vxe-table-column",{attrs:{width:"17%",field:"timeout",title:"超时数"}}),a("vxe-table-column",{attrs:{width:"20%",field:"time",title:"平均历时(分钟)"}}),a("vxe-table-column",{attrs:{width:"20%",field:"rate",title:"及时率"}})],1)],1),a("div",{staticClass:"timeout"},[a("div",{staticClass:"title"},[t._v(" 超时工单 "),a("vxe-modal",{attrs:{"lock-scroll":!1,"show-footer":"",width:"50vw"},on:{confirm:t.addReduce},model:{value:t.isAdd,callback:function(e){t.isAdd=e},expression:"isAdd"}},[a("vxe-table",{attrs:{"show-overflow":"",height:"auto",align:"center","sync-resize":t.isAdd,border:"",data:t.reduce,"edit-config":{trigger:"click",mode:"cell",activeMethod:t.not_edit_id}}},[a("vxe-table-column",{attrs:{field:"id",title:"故障单编号",width:"50%","edit-render":{name:"input"}}}),a("vxe-table-column",{attrs:{field:"province",title:"澄清归属",width:"30%","edit-render":{name:"input",attrs:{type:"text"}}}}),a("vxe-table-column",{attrs:{field:"time",title:"澄清历时",width:"20%","edit-render":{name:"$input",props:{type:"number"}}}})],1)],1)],1),a("vxe-table",{attrs:{align:"center",border:"","highlight-hover-row":"","max-height":"90%","auto-resize":"",data:t.timeoutList},on:{"cell-dblclick":t.dbClick}},[a("vxe-table-column",{attrs:{width:"28%",field:"id",title:"故障单编号"}}),a("vxe-table-column",{attrs:{width:"13%",field:"timeLimit",title:"故障时限(分钟)"}}),a("vxe-table-column",{attrs:{width:"24%",field:"timeText",title:"故障历时(分钟)"}}),a("vxe-table-column",{attrs:{width:"13%",field:"mark",title:"标记"}}),a("vxe-table-column",{attrs:{width:"22%",field:"reason",title:"超时原因","show-overflow":""}})],1)],1)])])},T=[],F=(a("13d5"),a("a9e3"),a("b680"),"172.0.0.233/gensmo/"),P={name:"timeout",props:["wywData"],watch:{wywData:function(){this.rawData=this.wywData,this.count()}},data:function(){return{timeCount:[],timeoutList:[],rawData:[],reduce:[{id:"",province:"",time:0,maxTime:0,timeLimit:0}],isAdd:!1}},created:function(){this.init()},methods:{init:function(){console.log("timeout init")},count:function(){var t=[{item:"TOP33",sum:0,timeout:0,rate:"100.0%",time:0,timeSum:0},{item:"TOP800家1-2级",sum:0,timeout:0,rate:"100.0%",time:0,timeSum:0},{item:"TOP800家3-6级",sum:0,timeout:0,rate:"100.0%",time:0,timeSum:0},{item:"所有客户",sum:0,timeout:0,rate:"100.0%",time:0,timeSum:0}];for(var e in this.timeoutList=[],this.rawData){var a=this.rawData[e];if("广东省广州市"==a.province&&"1"==a.is_assess){var i="1"==a.time_out;if(t[3].sum++,t[3].timeSum=t[3].timeSum+Number(a.assessment_time),t[3].time=(t[3].timeSum/t[3].sum).toFixed(2),i&&t[3].timeout++,t[3].rate=Number((t[3].sum-t[3].timeout)/t[3].sum*100).toFixed(2)+"%","1"==a.assess_TOPN)switch(a.level){case"一级":case"二级":t[1].sum++,t[1].timeSum=t[1].timeSum+Number(a.assessment_time),t[1].time=(t[1].timeSum/t[1].sum).toFixed(2),i&&t[1].timeout++,t[1].rate=Number((t[1].sum-t[1].timeout)/t[1].sum*100).toFixed(2)+"%";break;case"三级":case"四级":case"五级":case"六级":t[2].sum++,t[2].timeSum=t[2].timeSum+Number(a.assessment_time),t[2].time=(t[2].timeSum/t[2].sum).toFixed(2),i&&t[2].timeout++,t[2].rate=Number((t[2].sum-t[2].timeout)/t[2].sum*100).toFixed(2)+"%";break}if("1"==a.TOP33&&(t[0].sum++,t[0].timeSum=t[0].timeSum+Number(a.assessment_time),t[0].time=(t[0].timeSum/t[0].sum).toFixed(2),i&&t[0].timeout++,t[0].rate=Number((t[0].sum-t[0].timeout)/t[0].sum*100).toFixed(2)+"%"),i){var s="";"1"==a.TOP33&&(s+="TOP33 "),"1"==a.assess_TOPN&&(s+="TOP800 "),s=s.slice(0,-1);var r=a.time;parseInt(a.reduce_time)>0&&(r=r+"(-"+a.reduce_time+"="+a.assessment_time+")");var o={id:a.orderId,timeLimit:a.time_limit,time:a.time,reduce_time:a.reduce_time,timeText:r,reason:a.trouble_reason_symptom,mark:s};this.timeoutList.push(o)}}}this.timeCount=t},addReduce:function(){if(parseInt(this.reduce[0].time)>parseInt(this.reduce[0].maxTime))this.$XModal.message({message:"澄清时间不能大于故障历时",status:"warning"});else{var t=this,e=new FormData;e.append("id",this.reduce[0].id),e.append("province",this.reduce[0].province),e.append("time",this.reduce[0].maxTime),e.append("reduce_time",this.reduce[0].time),e.append("time_limit",this.reduce[0].timeLimit),this.axios.post("http://"+F+"scripts/assess_order/add_reduce.php",e).then((function(e){if("success"==e.data.status)if("1"==e.data.row){for(var a in t.$XModal.message({message:"修改成功"}),t.rawData){var i=t.rawData[a];if(i.orderId==t.reduce[0].id){i.reduce_time=t.reduce[0].time,""!=t.reduce[0].province&&(i.province=t.reduce[0].province);var s=parseInt(t.reduce[0].maxTime)-parseInt(t.reduce[0].time);i.assessment_time=s,s<=t.reduce[0].timeLimit?i.time_out="0":i.time_out="1",t.rawData[a]=i;break}}t.count()}else t.$XModal.message({message:"未找到工单或无改动",status:"warning"});else alert(e.data.errMsg)})).catch((function(t){alert(t)}))}},dbClick:function(t){this.reduce[0].id=t.row.id,this.reduce[0].maxTime=t.row.time,this.reduce[0].timeLimit=t.row.timeLimit,this.isAdd=!this.isAdd},not_edit_id:function(t){t.column;var e=t.columnIndex;return 0!==e}}},O=P,$=(a("1f75"),Object(u["a"])(O,k,T,!1,null,"0d525de3",null)),j=$.exports,z="172.0.0.233/gensmo/";Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t};var H={name:"Index",components:{sumLine:x,customerHis:C,timeout:j},data:function(){return{rawData:[],rawLocalData:[],importFlag:!1,import_text:"导入19数据（请选择“沃运维”系统导出的故障单列表）",timer:void 0}},created:function(){this.init()},methods:{init:function(){var t=new Date,e=new Date;t.setDate(1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),this.getData(t.Format("yyyy-MM-dd hh:mm:ss"),e.Format("yyyy-MM-dd hh:mm:ss"))},getData:function(t,e){var a=this;void 0!=a.timer&&(clearTimeout(a.timer),a.timer=void 0),a.dataReady=!1,a.dataLocalReady=!1;var i=new FormData;i.append("START",t),i.append("END",e),this.axios.post("http://"+z+"scripts/assess_order/get_order_by_datetime.php",i).then((function(t){"success"==t.data.status?(a.rawData=t.data.result,a.sum=t.data.sum,a.dataReady=!0,a.dataReady&&a.dataLocalReady&&a.setTimer()):alert(t.data.errMsg)})).catch((function(t){alert(t)}));var s=new FormData;s.append("id",""),s.append("name",""),s.append("start_time_start",""),s.append("start_time_end",""),s.append("end_time_start",t),s.append("end_time_end",e),s.append("number",""),s.append("index",""),s.append("limit",""),this.axios.post("http://"+z+"scripts/getList.php",s).then((function(t){"success"==t.data.status?(a.rawLocalData=t.data.result,a.dataLocalReady=!0,a.dataReady&&a.dataLocalReady&&a.setTimer()):alert(t.data.errMsg)})).catch((function(t){alert(t)}))},setTimer:function(){var t=this,e=new Date,a=new Date;e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),void 0!=this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){t.getData(e.Format("yyyy-MM-dd hh:mm:ss"),a.Format("yyyy-MM-dd hh:mm:ss"))}),6e5)},import19:function(){this.$refs.filElem.dispatchEvent(new MouseEvent("click"))},get_file:function(){var t=this;if(!t.importFlag)if(t.importFlag=!0,t.import_text="导入中，请稍后...",""!=this.$refs.filElem.value){var e=this.$refs.filElem.files[0],a=new FormData;a.append("file",e),this.axios.post("http://"+z+"scripts/assess_order/import_from_19.php",a).then((function(e){if(t.importFlag=!1,t.import_text="导入19数据（请选择“沃运维”系统导出的故障单列表）","success"==e.data.status){alert("成功导入"+e.data.sum+"条记录!");var a=this,i=new Date,s=new Date;i.setDate(1),i.setHours(0),i.setMinutes(0),i.setSeconds(0),a.getData(i.Format("yyyy-MM-dd hh:mm:ss"),s.Format("yyyy-MM-dd hh:mm:ss"))}else console.log(e),alert("错误:"+e.data.errMsg);t.$refs.filElem.value=""})).catch((function(e){console.log(e),t.importFlag=!1,t.import_text="导入19数据（请选择“沃运维”系统导出的故障单列表）",t.$refs.filElem.value=""}))}else t.importFlag=!1}}},V=H,I=(a("f9b7"),Object(u["a"])(V,f,p,!1,null,"339ad940",null)),N=I.exports;i["a"].use(d["a"]);var q=new d["a"]({routes:[{path:"/",name:"index",component:N}]}),X=a("bc3a"),Y=a.n(X),J=a("a7fe"),B=a.n(J),G=(a("c695"),a("cf75")),K=a.n(G);a("5d37");i["a"].config.productionTip=!1,i["a"].use(B.a,Y.a),i["a"].use(h.a),i["a"].use(K.a),new i["a"]({router:q,render:function(t){return t(c)}}).$mount("#app")},"665d":function(t,e,a){},8375:function(t,e,a){},"85ec":function(t,e,a){},f9b7:function(t,e,a){"use strict";var i=a("8375"),s=a.n(i);s.a}});
//# sourceMappingURL=app.ff9c272d.js.map